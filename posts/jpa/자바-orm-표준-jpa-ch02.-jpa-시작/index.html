<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>[자바 ORM 표준 JPA] ch02. JPA 시작 | 2taezeat, blog</title>
<meta name=keywords content="JPA,Backend"><meta name=description content="자바 ORM 표준 JPA 프로그래밍, ch02. JPA 시작, 간단 정리"><meta name=author content="2taezeat"><link rel=canonical href=https://2taezeat.github.io/posts/jpa/%EC%9E%90%EB%B0%94-orm-%ED%91%9C%EC%A4%80-jpa-ch02.-jpa-%EC%8B%9C%EC%9E%91/><meta name=google-site-verification content="YaEERzgrvu-ZwPg7gswZdTzRMufkHw3uIH7i8hVal1c"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.d54e889b3efa74e861d01cb8a15d5c39543cc6de6faafd93fc37426183137d6d.css integrity="sha256-1U6Imz76dOhh0By4oV1cOVQ8xt5vqv2T/DdCYYMTfW0=" rel="preload stylesheet" as=style><link rel=icon href=https://2taezeat.github.io/icon/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://2taezeat.github.io/icon/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://2taezeat.github.io/icon/favicon-32x32.png><link rel=apple-touch-icon href=https://2taezeat.github.io/icon/apple-touch-icon.png><link rel=mask-icon href=https://2taezeat.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://2taezeat.github.io/posts/jpa/%EC%9E%90%EB%B0%94-orm-%ED%91%9C%EC%A4%80-jpa-ch02.-jpa-%EC%8B%9C%EC%9E%91/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="[자바 ORM 표준 JPA] ch02. JPA 시작"><meta property="og:description" content="자바 ORM 표준 JPA 프로그래밍, ch02. JPA 시작, 간단 정리"><meta property="og:type" content="article"><meta property="og:url" content="https://2taezeat.github.io/posts/jpa/%EC%9E%90%EB%B0%94-orm-%ED%91%9C%EC%A4%80-jpa-ch02.-jpa-%EC%8B%9C%EC%9E%91/"><meta property="og:image" content="https://2taezeat.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-08-02T11:30:03+00:00"><meta property="article:modified_time" content="2024-08-02T11:30:03+00:00"><meta property="og:site_name" content="2taezeat, blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://2taezeat.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="[자바 ORM 표준 JPA] ch02. JPA 시작"><meta name=twitter:description content="자바 ORM 표준 JPA 프로그래밍, ch02. JPA 시작, 간단 정리"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://2taezeat.github.io/posts/"},{"@type":"ListItem","position":2,"name":"[자바 ORM 표준 JPA] ch02. JPA 시작","item":"https://2taezeat.github.io/posts/jpa/%EC%9E%90%EB%B0%94-orm-%ED%91%9C%EC%A4%80-jpa-ch02.-jpa-%EC%8B%9C%EC%9E%91/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[자바 ORM 표준 JPA] ch02. JPA 시작","name":"[자바 ORM 표준 JPA] ch02. JPA 시작","description":"자바 ORM 표준 JPA 프로그래밍, ch02. JPA 시작, 간단 정리","keywords":["JPA","Backend"],"articleBody":"2.4 객체 매핑 시작 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 package ~~~ import javax.persistence.*; @Entity @Table(name = \"MEMBER\") public class Member { @ID @Column(name = \"ID\") private String id; @Column (name = \"NAME\") private String username; // 매핑 정보가 없는 필드 private Integer age; } @Entitiy\n이 클래스를 테이블과 매핑한다고 JPA에게 알려줌 @Entitiy가 사용된 클래스를 엔티티 클래스라 한다. @Table\n엔티티 클래스에 매핑할 테이블 정보를 알려준다. 이 어노테이션을 생략하면, 클래스 이름을 테이블 이름으로 매핑한다. @Id\n엔티티 클래스의 필드를 테이블의 기본 키(Primary Key) 에 매핑 @Id 가 사용된 필드를 식별자 필드라 한다. @Column\n필드를 컬럼에 매핑 매핑 정보가 없는 필드\n매핑 어노테이션을 생략하면 필드명을 사용해서 컬럼명으로 매핑한다. 2.5 속성 설정 주로 사용하는 속성 Spring Boot에서 JPA를 사용하는 경우, persistence.xml 파일은 꼭 필요하지 않습니다. Spring Boot는 persistence.xml 파일 없이도 애플리케이션을 설정하고 동작할 수 있도록 자동 설정 기능을 제공합니다.\n대신, Spring Boot에서는 애플리케이션 속성 파일(application.properties 또는 application.yml)을 사용하여 JPA 관련 설정을 수행합니다.\nSpring Boot는 @SpringBootApplication 애노테이션을 통해 자동으로 JPA 관련 설정을 감지하고, 별도의 persistence.xml 파일 없이도 애플리케이션을 구성합니다\npersistence.xml이 필요한 경우 일반적으로 Spring Boot와 JPA를 사용할 때 persistence.xml은 필요하지 않지만, 다음과 같은 특정한 경우에는 사용할 수 있습니다\n기존의 전통적인 JPA 설정을 그대로 유지해야 할 때 복잡한 JPA 설정이나 여러 개의 영속성 유닛을 설정해야 할 때 Spring Boot의 자동 설정을 우회하여 특정 설정을 수동으로 처리해야 할 때 2.5.1 데이터베이스 방언 JPA는 특정 데이터베이스에 종속되지 않는다.\n다른 데이터베이스로 쉽게 교체 가능 하지만, 각 데이터베이스가 제공하는 SQL 문법과 함수가 다를 수 있다. SQL 표준을 지키지 않거나 특정 데이터베이스만의 고유한 기능을 JPA에서는 방언(Dialect) 이라 한다.\nJPA 구현체들은 다양한 데이터베이스 방언 클래스를 제공한다.\n2.6 애플리케이션 개발 2.6.1 엔티티 매니저 설정 엔티티 매니저 팩토리 설정 JPA를 시작하려면 설정 정보를 사용해서 엔티티 매니저 팩토리를 생성해야 한다. 설정 정보를 읽어서 JPA를 동작시키기 위한 기반 객체를 만들고 JPA 구현체에 따라서는 데이터베이스 커넥션 풀도 생성 따라서, 엔티티 매니저 팩토리를 생성하는 비용은 아주 크다. 엔티티 매니저 팩토리는 애플리케이션 전체에서 딱 한 번만 생성하고 공유해서 사용해야 한다. val emf = Persistence.createEntityManagerFactory(\"~~~\") 엔티티 매니저 생성 엔티티 매니저 팩토리에서 엔티티 매니저를 생성한다. JPA의 기능 대부분은 이 엔티티 매니저가 제공한다. 대표적으로 엔티티 매니저를 사용해서 엔티티를 데이터베이스에 등록/수정/삭제/조회할 수 있다. 엔티티 매니저는 내부에 데이터베이스 커넥션를 유지하면서 데이터베이스와 통신한다. 따라서 애플리케이션 개발자는 엔티티 매니저를 가상의 데이터베이스로 생각할 수 있다. val em = emf.ceateEntityManager() 종료 사용이 끝난 엔티티 매니저는 반드시 종료해야 한다.\nem.close() App이 종료할 때 엔티티 매니저 팩토리도 종료해야 한다.\nemf.close() 2.6.2 트랜잭션 관리 JPA를 사용하면 항상 트랜잭션 안에서 데이터를 변경해야 한다. 트랜잭션 없이 데이터를 변경하면 예외가 발생한다. 트랜잭션을 시작하려면 엔티티 매니저에서 트랜잭션 API를 받아와야 한다. 2.6.3 비즈니스 로직과 JPQL JPA를 사용하면 애플리케이션 개발자는 엔티티 객체를 중심으로 개발하고 데이터베이스에 대한 처리는 JPA에 맡겨야 한다.\n등록, 수정, 삭제, 한 건 조회는, SQL을 전혀 사용하지 않아도 된다.\n문제는 검색 쿼리다. JPA는 엔티티 객체를 중심으로 개발하므로 검색을 할 때도 테이블이 아닌 엔티티 객체를 대상으로 검색해야 한다.\n그런데 테이블이 아닌 엔티티 객체를 대상으로 검색하려면 데이터베이스의 모든 데이터를 애플리케이션으로 불러와서 엔티티 객체로 변경한 다음 검색해야 하는데, 이는 사실상 불가능하다.\n결국 검색 조건이 포함된 SQL을 사용해야 한다. JPA는 JPQL(Java Persistence Query Language) 이라는 쿼리 언어로 이를 해결한다.\nJPA는 SQL을 추상화한 JPQL이라는 객체지향 퀴리 언어를 제공\nJPQL은 엔티티 객체를 대상으로 쿼리한다. 쉽게 이야기해서 클래스와 필드를 대상으로 쿼리한다.\nselect m from Member m 이 바로 JPQL 이다.\nfrom Member는 MEMBER 테이블이 아니라, Member 엔티티 객체를 말한다.\nJPQL은 데이터베이스 테이블을 전혀 알지 못한다.\nJPA는 JPQL을 분석해서 다음과 같은 적절한 SQL을 만들어 데이터베이스에서 데이터를 조회한다.\nSELECT M.ID, M.NAME, M.AGE FROM MEMBER M Reference 자바 ORM 표준 JPA 프로그래밍 (김영한) https://product.kyobobook.co.kr/detail/S000001766367 ","wordCount":"569","inLanguage":"en","image":"https://2taezeat.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2024-08-02T11:30:03Z","dateModified":"2024-08-02T11:30:03Z","author":{"@type":"Person","name":"2taezeat"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://2taezeat.github.io/posts/jpa/%EC%9E%90%EB%B0%94-orm-%ED%91%9C%EC%A4%80-jpa-ch02.-jpa-%EC%8B%9C%EC%9E%91/"},"publisher":{"@type":"Organization","name":"2taezeat, blog","logo":{"@type":"ImageObject","url":"https://2taezeat.github.io/icon/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://2taezeat.github.io/ accesskey=h title="2taezeat blog (Alt + H)"><img src=https://2taezeat.github.io/icon/apple-touch-icon.png alt aria-label=logo height=30>2taezeat blog</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://2taezeat.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://2taezeat.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://2taezeat.github.io/searchs/ title=Search><span>Search</span></a></li><li><a href=https://github.com/2taezeat title=Github><span>Github</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://2taezeat.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://2taezeat.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">[자바 ORM 표준 JPA] ch02. JPA 시작</h1><div class=post-description>자바 ORM 표준 JPA 프로그래밍, ch02. JPA 시작, 간단 정리</div><div class=post-meta><span title='2024-08-02 11:30:03 +0000 +0000'>2024-08-02</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;569 words&nbsp;·&nbsp;2taezeat</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><ul><li><a href=#24-객체-매핑-시작>2.4 객체 매핑 시작</a></li><li><a href=#25-속성-설정>2.5 속성 설정</a><ul><li><a href=#주로-사용하는-속성>주로 사용하는 속성</a></li><li><a href=#persistencexml이-필요한-경우><code>persistence.xml</code>이 필요한 경우</a></li><li><a href=#251-데이터베이스-방언>2.5.1 데이터베이스 방언</a></li></ul></li><li><a href=#26-애플리케이션-개발>2.6 애플리케이션 개발</a><ul><li><a href=#261-엔티티-매니저-설정>2.6.1 엔티티 매니저 설정</a><ul><li><a href=#엔티티-매니저-팩토리-설정>엔티티 매니저 팩토리 설정</a></li><li><a href=#엔티티-매니저-생성>엔티티 매니저 생성</a></li><li><a href=#종료>종료</a></li></ul></li><li><a href=#262-트랜잭션-관리>2.6.2 트랜잭션 관리</a></li><li><a href=#263-비즈니스-로직과-jpql>2.6.3 비즈니스 로직과 JPQL</a></li></ul></li></ul></li><li><a href=#reference>Reference</a></li></ul></nav></div></details></div><div class=post-content><h2 id=24-객체-매핑-시작>2.4 객체 매핑 시작<a hidden class=anchor aria-hidden=true href=#24-객체-매핑-시작>#</a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>package</span><span class=w> </span><span class=err>~~~</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>javax.persistence.*</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Entity</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Table</span><span class=p>(</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;MEMBER&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>Member</span><span class=w> </span><span class=p>{</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@ID</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Column</span><span class=p>(</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;ID&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>id</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Column</span><span class=w> </span><span class=p>(</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;NAME&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>username</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// 매핑 정보가 없는 필드</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>Integer</span><span class=w> </span><span class=n>age</span><span class=p>;</span><span class=w>   
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=/images/JPA/SCR-20240828-pbww.png alt=SCR-20240828-pbww width=680 height=auto></p><p><img loading=lazy src=/images/JPA/SCR-20240828-opqk.png alt=SCR-20240828-opqk width=680 height=auto></p><ul><li><p><code>@Entitiy</code></p><ul><li>이 클래스를 테이블과 매핑한다고 JPA에게 알려줌</li><li><code>@Entitiy</code>가 사용된 클래스를 엔티티 클래스라 한다.</li></ul></li><li><p><code>@Table</code></p><ul><li>엔티티 클래스에 매핑할 테이블 정보를 알려준다.</li><li>이 어노테이션을 생략하면, 클래스 이름을 테이블 이름으로 매핑한다.</li></ul></li><li><p><code>@Id</code></p><ul><li>엔티티 클래스의 필드를 테이블의 <strong>기본 키(Primary Key)</strong> 에 매핑</li><li><code>@Id</code> 가 사용된 필드를 <strong>식별자 필드</strong>라 한다.</li></ul></li><li><p><code>@Column</code></p><ul><li>필드를 컬럼에 매핑</li></ul></li><li><p><strong>매핑 정보가 없는 필드</strong></p><ul><li>매핑 어노테이션을 생략하면 필드명을 사용해서 컬럼명으로 매핑한다.</li></ul></li></ul><h2 id=25-속성-설정>2.5 속성 설정<a hidden class=anchor aria-hidden=true href=#25-속성-설정>#</a></h2><h3 id=주로-사용하는-속성>주로 사용하는 속성<a hidden class=anchor aria-hidden=true href=#주로-사용하는-속성>#</a></h3><p><img loading=lazy src=/images/JPA/SCR-20240828-ordm.png alt=SCR-20240828-ordm width=680 height=auto><img loading=lazy src=/images/JPA/SCR-20240828-osbo.png alt=SCR-20240828-osbo width=680 height=auto></p><blockquote><p>Spring Boot에서 JPA를 사용하는 경우, <code>persistence.xml</code> 파일은 꼭 필요하지 않습니다. Spring Boot는 <code>persistence.xml</code> 파일 없이도 애플리케이션을 설정하고 동작할 수 있도록 자동 설정 기능을 제공합니다.</p><p>대신, Spring Boot에서는 애플리케이션 속성 파일(<code>application.properties</code> 또는 <code>application.yml</code>)을 사용하여 JPA 관련 설정을 수행합니다.</p><p>Spring Boot는 <code>@SpringBootApplication</code> 애노테이션을 통해 자동으로 JPA 관련 설정을 감지하고, 별도의 <code>persistence.xml</code> 파일 없이도 애플리케이션을 구성합니다</p></blockquote><h3 id=persistencexml이-필요한-경우><code>persistence.xml</code>이 필요한 경우<a hidden class=anchor aria-hidden=true href=#persistencexml이-필요한-경우>#</a></h3><p>일반적으로 Spring Boot와 JPA를 사용할 때 <code>persistence.xml</code>은 필요하지 않지만, 다음과 같은 특정한 경우에는 사용할 수 있습니다</p><ul><li>기존의 전통적인 JPA 설정을 그대로 유지해야 할 때</li><li>복잡한 JPA 설정이나 여러 개의 영속성 유닛을 설정해야 할 때</li><li>Spring Boot의 자동 설정을 우회하여 특정 설정을 수동으로 처리해야 할 때</li></ul><h3 id=251-데이터베이스-방언>2.5.1 데이터베이스 방언<a hidden class=anchor aria-hidden=true href=#251-데이터베이스-방언>#</a></h3><p><img loading=lazy src=/images/JPA/SCR-20240828-oryf.png alt=SCR-20240828-oryf width=680 height=auto></p><p><img loading=lazy src=/images/JPA/SCR-20240828-orml.png alt=SCR-20240828-orml width=680 height=auto></p><ul><li><p>JPA는 특정 데이터베이스에 종속되지 않는다.</p><ul><li>다른 데이터베이스로 쉽게 교체 가능</li><li>하지만, 각 데이터베이스가 제공하는 SQL 문법과 함수가 다를 수 있다.</li></ul></li><li><p>SQL 표준을 지키지 않거나 특정 데이터베이스만의 고유한 기능을 JPA에서는 <strong>방언(Dialect)</strong> 이라 한다.</p></li><li><p><strong>JPA 구현체</strong>들은 다양한 데이터베이스 방언 클래스를 제공한다.</p></li></ul><h2 id=26-애플리케이션-개발>2.6 애플리케이션 개발<a hidden class=anchor aria-hidden=true href=#26-애플리케이션-개발>#</a></h2><p><img loading=lazy src=/images/JPA/SCR-20240828-osta.png alt=SCR-20240828-osta width=680 height=auto></p><h3 id=261-엔티티-매니저-설정>2.6.1 엔티티 매니저 설정<a hidden class=anchor aria-hidden=true href=#261-엔티티-매니저-설정>#</a></h3><h4 id=엔티티-매니저-팩토리-설정>엔티티 매니저 팩토리 설정<a hidden class=anchor aria-hidden=true href=#엔티티-매니저-팩토리-설정>#</a></h4><ul><li>JPA를 시작하려면 설정 정보를 사용해서 <strong>엔티티 매니저 팩토리</strong>를 생성해야 한다.</li><li>설정 정보를 읽어서 JPA를 동작시키기 위한 기반 객체를 만들고 JPA 구현체에 따라서는 데이터베이스 커넥션 풀도 생성<ul><li>따라서, <strong>엔티티 매니저 팩토리를 생성하는 비용</strong>은 아주 <strong>크다</strong>.</li><li>엔티티 매니저 팩토리는 애플리케이션 전체에서 <strong>딱 한 번만 생성하고 공유</strong>해서 사용해야 한다.</li></ul></li><li><code>val emf = Persistence.createEntityManagerFactory("~~~")</code></li></ul><h4 id=엔티티-매니저-생성>엔티티 매니저 생성<a hidden class=anchor aria-hidden=true href=#엔티티-매니저-생성>#</a></h4><ul><li>엔티티 매니저 팩토리에서 <strong>엔티티 매니저</strong>를 생성한다.</li><li>JPA의 기능 대부분은 이 엔티티 매니저가 제공한다.<ul><li>대표적으로 엔티티 매니저를 사용해서 엔티티를 데이터베이스에 등록/수정/삭제/조회할 수 있다.</li></ul></li><li>엔티티 매니저는 내부에 <strong>데이터베이스 커넥션</strong>를 유지하면서 데이터베이스와 통신한다.</li><li>따라서 애플리케이션 개발자는 엔티티 매니저를 가상의 데이터베이스로 생각할 수 있다.</li><li><code>val em = emf.ceateEntityManager()</code></li></ul><h4 id=종료>종료<a hidden class=anchor aria-hidden=true href=#종료>#</a></h4><ul><li><p>사용이 끝난 엔티티 매니저는 반드시 종료해야 한다.</p><ul><li><code>em.close()</code></li></ul></li><li><p>App이 종료할 때 엔티티 매니저 팩토리도 종료해야 한다.</p><ul><li><code>emf.close()</code></li></ul></li></ul><h3 id=262-트랜잭션-관리>2.6.2 트랜잭션 관리<a hidden class=anchor aria-hidden=true href=#262-트랜잭션-관리>#</a></h3><p><img loading=lazy src=/images/JPA/SCR-20240828-ovdw-2.png alt=SCR-20240828-ovdw-2 width=680 height=auto></p><ul><li>JPA를 사용하면 항상 트랜잭션 안에서 데이터를 변경해야 한다. 트랜잭션 없이 데이터를 변경하면 예외가 발생한다.</li><li>트랜잭션을 시작하려면 <strong>엔티티 매니저</strong>에서 트랜잭션 API를 받아와야 한다.</li></ul><h3 id=263-비즈니스-로직과-jpql>2.6.3 비즈니스 로직과 JPQL<a hidden class=anchor aria-hidden=true href=#263-비즈니스-로직과-jpql>#</a></h3><p><img loading=lazy src=/images/JPA/SCR-20240828-oznj.png alt=SCR-20240828-oznj width=680 height=auto></p><ul><li><p>JPA를 사용하면 애플리케이션 개발자는 엔티티 객체를 중심으로 개발하고 데이터베이스에 대한 처리는 JPA에 맡겨야 한다.</p><ul><li><p>등록, 수정, 삭제, 한 건 조회는, SQL을 전혀 사용하지 않아도 된다.</p></li><li><p>문제는 <strong>검색 쿼리</strong>다. JPA는 엔티티 객체를 중심으로 개발하므로 검색을 할 때도 테이블이 아닌 엔티티 객체를 대상으로 검색해야 한다.</p></li></ul></li></ul><p>그런데 테이블이 아닌 엔티티 객체를 대상으로 검색하려면 데이터베이스의 모든 데이터를 애플리케이션으로 불러와서 엔티티 객체로 변경한 다음 검색해야 하는데, 이는 사실상 불가능하다.</p><ul><li><p>결국 검색 조건이 포함된 SQL을 사용해야 한다. JPA는 <strong>JPQL(Java Persistence Query Language)</strong> 이라는 쿼리 언어로 이를 해결한다.</p></li><li><p>JPA는 SQL을 추상화한 JPQL이라는 객체지향 퀴리 언어를 제공</p></li><li><p>JPQL은 엔티티 객체를 대상으로 쿼리한다. 쉽게 이야기해서 클래스와 필드를 대상으로 쿼리한다.</p><ul><li><p><code>select m from Member m</code> 이 바로 JPQL 이다.</p></li><li><p><code>from Member</code>는 MEMBER 테이블이 아니라, Member <strong>엔티티 객체</strong>를 말한다.</p></li><li><p>JPQL은 데이터베이스 테이블을 전혀 알지 못한다.</p></li></ul></li><li><p>JPA는 JPQL을 분석해서 다음과 같은 적절한 SQL을 만들어 데이터베이스에서 데이터를 조회한다.</p><ul><li><code>SELECT M.ID, M.NAME, M.AGE FROM MEMBER M</code></li></ul></li></ul><h1 id=reference>Reference<a hidden class=anchor aria-hidden=true href=#reference>#</a></h1><ul><li>자바 ORM 표준 JPA 프로그래밍 (김영한) <a href=https://product.kyobobook.co.kr/detail/S000001766367>https://product.kyobobook.co.kr/detail/S000001766367</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://2taezeat.github.io/tags/jpa/>JPA</a></li><li><a href=https://2taezeat.github.io/tags/backend/>Backend</a></li></ul><nav class=paginav><a class=prev href=https://2taezeat.github.io/posts/jpa/%EC%9E%90%EB%B0%94-orm-%ED%91%9C%EC%A4%80-jpa-ch03.-%EC%98%81%EC%86%8D%EC%84%B1-%EA%B4%80%EB%A6%AC/><span class=title>« Prev</span><br><span>[자바 ORM 표준 JPA] ch03. 영속성 관리</span>
</a><a class=next href=https://2taezeat.github.io/posts/jpa/%EC%9E%90%EB%B0%94-orm-%ED%91%9C%EC%A4%80-jpa-ch01.-jpa-%EC%86%8C%EA%B0%9C/><span class=title>Next »</span><br><span>[자바 ORM 표준 JPA] ch01. JPA 소개</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share [자바 ORM 표준 JPA] ch02. JPA 시작 on x" href="https://x.com/intent/tweet/?text=%5b%ec%9e%90%eb%b0%94%20ORM%20%ed%91%9c%ec%a4%80%20JPA%5d%20ch02.%20JPA%20%ec%8b%9c%ec%9e%91&amp;url=https%3a%2f%2f2taezeat.github.io%2fposts%2fjpa%2f%25EC%259E%2590%25EB%25B0%2594-orm-%25ED%2591%259C%25EC%25A4%2580-jpa-ch02.-jpa-%25EC%258B%259C%25EC%259E%2591%2f&amp;hashtags=JPA%2cBackend"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [자바 ORM 표준 JPA] ch02. JPA 시작 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2f2taezeat.github.io%2fposts%2fjpa%2f%25EC%259E%2590%25EB%25B0%2594-orm-%25ED%2591%259C%25EC%25A4%2580-jpa-ch02.-jpa-%25EC%258B%259C%25EC%259E%2591%2f&amp;title=%5b%ec%9e%90%eb%b0%94%20ORM%20%ed%91%9c%ec%a4%80%20JPA%5d%20ch02.%20JPA%20%ec%8b%9c%ec%9e%91&amp;summary=%5b%ec%9e%90%eb%b0%94%20ORM%20%ed%91%9c%ec%a4%80%20JPA%5d%20ch02.%20JPA%20%ec%8b%9c%ec%9e%91&amp;source=https%3a%2f%2f2taezeat.github.io%2fposts%2fjpa%2f%25EC%259E%2590%25EB%25B0%2594-orm-%25ED%2591%259C%25EC%25A4%2580-jpa-ch02.-jpa-%25EC%258B%259C%25EC%259E%2591%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [자바 ORM 표준 JPA] ch02. JPA 시작 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2f2taezeat.github.io%2fposts%2fjpa%2f%25EC%259E%2590%25EB%25B0%2594-orm-%25ED%2591%259C%25EC%25A4%2580-jpa-ch02.-jpa-%25EC%258B%259C%25EC%259E%2591%2f&title=%5b%ec%9e%90%eb%b0%94%20ORM%20%ed%91%9c%ec%a4%80%20JPA%5d%20ch02.%20JPA%20%ec%8b%9c%ec%9e%91"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [자바 ORM 표준 JPA] ch02. JPA 시작 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2f2taezeat.github.io%2fposts%2fjpa%2f%25EC%259E%2590%25EB%25B0%2594-orm-%25ED%2591%259C%25EC%25A4%2580-jpa-ch02.-jpa-%25EC%258B%259C%25EC%259E%2591%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [자바 ORM 표준 JPA] ch02. JPA 시작 on whatsapp" href="https://api.whatsapp.com/send?text=%5b%ec%9e%90%eb%b0%94%20ORM%20%ed%91%9c%ec%a4%80%20JPA%5d%20ch02.%20JPA%20%ec%8b%9c%ec%9e%91%20-%20https%3a%2f%2f2taezeat.github.io%2fposts%2fjpa%2f%25EC%259E%2590%25EB%25B0%2594-orm-%25ED%2591%259C%25EC%25A4%2580-jpa-ch02.-jpa-%25EC%258B%259C%25EC%259E%2591%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [자바 ORM 표준 JPA] ch02. JPA 시작 on telegram" href="https://telegram.me/share/url?text=%5b%ec%9e%90%eb%b0%94%20ORM%20%ed%91%9c%ec%a4%80%20JPA%5d%20ch02.%20JPA%20%ec%8b%9c%ec%9e%91&amp;url=https%3a%2f%2f2taezeat.github.io%2fposts%2fjpa%2f%25EC%259E%2590%25EB%25B0%2594-orm-%25ED%2591%259C%25EC%25A4%2580-jpa-ch02.-jpa-%25EC%258B%259C%25EC%259E%2591%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [자바 ORM 표준 JPA] ch02. JPA 시작 on ycombinator" href="https://news.ycombinator.com/submitlink?t=%5b%ec%9e%90%eb%b0%94%20ORM%20%ed%91%9c%ec%a4%80%20JPA%5d%20ch02.%20JPA%20%ec%8b%9c%ec%9e%91&u=https%3a%2f%2f2taezeat.github.io%2fposts%2fjpa%2f%25EC%259E%2590%25EB%25B0%2594-orm-%25ED%2591%259C%25EC%25A4%2580-jpa-ch02.-jpa-%25EC%258B%259C%25EC%259E%2591%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><script src=https://utteranc.es/client.js repo=2taezeat/blog_comment issue-term=pathname label=comment theme=github-light crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2024 <a href=https://2taezeat.github.io/>2taezeat, blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>