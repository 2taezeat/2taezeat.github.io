<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>[오브젝트] ch02. 객체지향 프로그래밍 | 2taezeat, blog</title>
<meta name=keywords content="OOP,Kotlin"><meta name=description content="ch02. 객체지향 프로그래밍"><meta name=author content="2taezeat"><link rel=canonical href=http://localhost:1313/posts/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-ch2.-%EA%B0%9D%EC%B2%B4%EC%A7%80%ED%96%A5-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/><meta name=google-site-verification content="YaEERzgrvu-ZwPg7gswZdTzRMufkHw3uIH7i8hVal1c"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.9bc633d66da2093ac93d30e5b21470b6655a1e928ddc297458ca9dfb4f00c07d.css integrity="sha256-m8Yz1m2iCTrJPTDlshRwtmVaHpKN3Cl0WMqd+08AwH0=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/icon/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/icon/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/icon/favicon-32x32.png><link rel=apple-touch-icon href=http://localhost:1313/icon/apple-touch-icon.png><link rel=mask-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/posts/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-ch2.-%EA%B0%9D%EC%B2%B4%EC%A7%80%ED%96%A5-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="[오브젝트] ch02. 객체지향 프로그래밍"><meta property="og:description" content="ch02. 객체지향 프로그래밍"><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/posts/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-ch2.-%EA%B0%9D%EC%B2%B4%EC%A7%80%ED%96%A5-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/"><meta property="og:image" content="http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-02-02T11:30:03+00:00"><meta property="article:modified_time" content="2024-02-02T11:30:03+00:00"><meta property="og:site_name" content="2taezeat, blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="[오브젝트] ch02. 객체지향 프로그래밍"><meta name=twitter:description content="ch02. 객체지향 프로그래밍"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"[오브젝트] ch02. 객체지향 프로그래밍","item":"http://localhost:1313/posts/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-ch2.-%EA%B0%9D%EC%B2%B4%EC%A7%80%ED%96%A5-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[오브젝트] ch02. 객체지향 프로그래밍","name":"[오브젝트] ch02. 객체지향 프로그래밍","description":"ch02. 객체지향 프로그래밍","keywords":["OOP","Kotlin"],"articleBody":"2. 객체지향 프로그래밍 객체지향 패러다임에서 집중 해야 하는 두 가지\n클래스 보다는 어떤 객체가 필요한지 고민하라 객체를 독립적인 존재가 아니라 기능을 구현하기 위해 협력하는 공동체의 일원으로 봐야 한다. 도메인(domain): 문제를 해결하기 위해 사용자가 프로그램을 사용하는 분야\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 class Screening(private val movie: Movie, private val sequence: Int, private val whenScreened: LocalDateTime) { fun getStartTime() = whenScreened fun isSequence(sequence: Int) = this.sequence == sequence fun getMovieFee() = movie.fee fun reserve(customer: Customer, audienceCount: Int) = Reservation(customer, this, calculateFee(audienceCount), audienceCount) private fun calculateFee(audienceCount: Int) = movie.calculateMovieFee(this).times(audienceCount.toDouble()) } class Money(private val amount: BigDecimal) { companion object { val ZERO = wons(0) fun wons(amount: Long) = Money(BigDecimal.valueOf(amount)) fun wons(amount: Double) = Money(BigDecimal.valueOf(amount)) } fun plus(amount: Money) = Money(this.amount.add(amount.amount)) fun minus(amount: Money) = Money(this.amount.subtract(amount.amount)) fun times(percent: Double) = Money(this.amount.multiply(BigDecimal.valueOf(percent))) fun isLessThan(other: Money) = amount \u003c other.amount fun isGreaterThan(other: Money) = amount \u003e= other.amount } interface DiscountPolicy { fun calculateDiscountAmount(screening: Screening): Money } abstract class DefaultDiscountPolicy(vararg conditions: DisCountCondition) : DiscountPolicy { private val conditions: MutableList\u003cDisCountCondition\u003e = conditions.toMutableList() override fun calculateDiscountAmount(screening: Screening): Money { conditions.forEach { if (it.isSatisfiedBy(screening)) { return getDiscountAmount(screening) } } return Money.ZERO } abstract fun getDiscountAmount(screening: Screening): Money } class AmountDiscountPolicy( private val discountMoney: Money, vararg conditions: DisCountCondition ) : DefaultDiscountPolicy() { override fun getDiscountAmount(screening: Screening) = discountMoney } class PercentDiscountPolicy( private val percent: Double, vararg conditions: DisCountCondition ) : DefaultDiscountPolicy() { override fun getDiscountAmount(screening: Screening) = screening.getMovieFee().times(percent) } interface DisCountCondition { fun isSatisfiedBy(screening: Screening): Boolean } class SequenceCondition(private val sequence: Int) : DisCountCondition { override fun isSatisfiedBy(screening: Screening) = screening.isSequence(sequence) } class PeriodCondition( private val dayOfWeek: DayOfWeek, private val startTime: LocalTime, private val endTime: LocalTime ) : DisCountCondition { override fun isSatisfiedBy(screening: Screening) = screening.getStartTime().dayOfWeek.equals(dayOfWeek) \u0026\u0026 startTime \u003c= screening.getStartTime() .toLocalTime() \u0026\u0026 endTime \u003e= screening.getStartTime().toLocalTime() } class NoneDisCountPolicy() : DiscountPolicy { override fun calculateDiscountAmount(screening: Screening) = Money.ZERO } data class Movie( val title: String, val runningTime: Duration, val fee: Money, val discountPolicy: DiscountPolicy ) { fun calculateMovieFee(screening: Screening) = fee.minus(discountPolicy.calculateDiscountAmount(screening)) fun changeDiscountPolicy(discountPolicy: DiscountPolicy) = this.copy(discountPolicy = discountPolicy) } data class Reservation( val customer: Customer, val screening: Screening, val fee: Money, val audienceCount: Int ) class Customer() ///////////////////////// fun main() { var avatar = Movie(\"아바타\", 210.minutes, Money.wons(10000), NoneDisCountPolicy()) println(avatar.discountPolicy) avatar = avatar.changeDiscountPolicy(PercentDiscountPolicy(0.1, SequenceCondition(1), SequenceCondition(6))) println(avatar.discountPolicy) } 자율적인 객체 객체는 상태(State) 와 행동(Behavior) 을 함께 가진 복합적인 존재 객체는 스스로 판단하고 행동하는 자율적인 존재 캡슐화: 데이터와 기능을 객체 내부로 함께 묶는 것\nOOP 언어들은 접근 수정자를 통해, 외부에서의 접근을 통제할 수 있는 접근 제어 매커니즘 을 제공\n캡슐화와 접근 제어는 객체를 두 부분으로 나눈다.\n퍼블릭 인터페이스: 외부에서 접근가능한 부분 구현(implementation): 외부에서 접근 불가능하고 오직 내부에서만 접근 가능한 부분 설계가 필요한 이유는 변경을 관리하기 위함이다.\nOOP는 의존성을 적절히 관리해서, 변경에 대한 파급효과를 제어할 수 있는 다양한 방법 제공, 대표적으로 접근 제어 협력하는 객체들의 공동체 OOP의 장점은 객체를 이용해 도메인의 의미를 풍부하게 표현 할 수 있다는 것 의미를 좀 더 명시적이고 분명하게 표현할 수 있다면 객체를 사용해라 그 개념이 비록 하나의 인스턴스 변수만 포함하더라도 개념을 명시적으로 표현하는 것은 설계의 명확성과 유연성을 높히는 첫 걸음이다. 협력에 관한 짧은 이야기 객체는 다른 객체의 인터페이스에 공개된 행동을 수행하도록 request(요청) 한다. 요청 받은 객체는 자율적인 방법에 따라 요청을 처리하고 response(응답) 한다. 객체가 다른 객체와 상호작용할 수 있는 유일한 방법은 메시지를 전송(send) 하는 것뿐이다. 다른 객체에게 요청이 도달할 때 해당 객체가 메시지를 수신(receive) 했다고 이야기 한다. 수신된 메시지를 처리하기 위한 자신만의 방법을 메서드(method) 라고 한다. 메시지와 메서드의 구분에서부터 다형성(polymorphism) 개념이 시작한다. 컴파일 시간 의존성과 런타임 의존성 코드 의존성(컴파일 의존성)과 런타임 의존성이 서로 다를 수 있다.\n클래스 사이의 의존성과 객체 사이의 의존성은 다를 수 있다. 두 개가 다를수록 코드를 이해하기 어려워진다. 두 개가 다를수록 코드는 더 유연해지고 확장 가능하다 설계는 트레이드오프의 산물이다. 설계가 유연해질수록 코드를 이해하고 디버깅하기는 점점 더 어려워진다. (트레이드 오프)\n반대로, 유연성을 억제하면, 재사용성과 확장 가능성은 낮아진다. 훌륭한 객체지향 설계자는 항상 유연성과 가독성이에서 고민해야 한다. 차이에 의한 프로그래밍 차이에 의한 프로그래밍(progamming by difference): 부모 클래스와 다른 부분만을 추가해서 새로운 클래스를 쉽고 빠르게 만드는 방법 상속과 인터페이스 상속이 가치 있는 이유는 재사용도 있지만, 부모 클래스가 제공하는 모든 인터페이스를 자식 클래스가 물려받을 수 있기 때문이다. 인터페이스는 객체가 이해할 수 있는 메시지의 목록을 정의한다. 외부 객체는 자식 크래스를 부모 클래스와 동일한 타입으로 간주 할 수 있다. 자식 클래스가 부모 클래스를 대신하는 것을 업캐스팅(upcasting) 이라 한다. 다형성 동일한 메시지를 전송하지만 실제로 어떤 메서드가 실행될 것인지는 메시지를 수신하는 객체의 클래스가 무엇이냐에 따라 달라지는 것 다형성이라 한다.\n다형성은 컴파일 시간 의존성과 런타임 시간 의존성이 다를 수 있다는 사실에 기반으로 한다.\n다형성이란 동일한 메시지를 수신했을 때 객체에 타입에 따라 다르게 응답할 수 있는 능력\n다형적인 협력에 참여할 수 있는 이유는 객체가 동일한 인터페이스를 물려 받았기 때문 다형성을 구현하는 방법은 매우 다양하지만, 메시지에 대한 실행 메서드를 컴파일이 아니라 런타임에 결정한다는 공통점이 있다.\n지연(lazy) 바인딩, 동적(dynamic) 바인딩 이라 한다. 컴파일에 결정하는 것을 초기(early) 바인딩, 정적(static) 바인딩 이라한다. 다형성은 추상적인 개념이며, 구현 할 수 있는 방법이 상속 말고도 다양하다. 구현 상속: 서브클래싱(subclassing)\n순수하게 코드를 재사용하기 위해서 상속하는 것 변경에 취약할 수 있다 인터페이스 상속: 서브타이핑(subtyping)\n다형적인 협력을 위해 부모, 자식이 인터페이스를 공유할 수 있도록 상속하는 것 상속은 인터페이스 상속을 위해 사용해야 한다 추상화의 힘 추상화의 장점\n요구사항의 정책을 높은 수준에서 서술할 수 있다. (협력 흐름을 기술한다.) 세부적인 내용을 무시한 채 상위 정채을 쉽고 간단하게 표현 가능 표현의 수준을 조정하는 것을 가능하게 한다. Ex) “영화 예매 요금은 최대 하나의 ‘할인 정책’과 다수의 ‘할인 조건’을 이용해 계산할 수 있다.” 설계가 좀 더 유연해진다. 설계가 구체적인 상황(가령, 예외 케이스)에 결합되는 것을 방지하기 때문 디자인 패턴이나 프레임워크 모두 추상화를 이용해 상위정책을 정의하는 객체지향 메커니즘을 활용한다.\n유연한 설계 항상 예외 케이스를 최소화하고 일관성을 유지할 수 있는 방법을 선택해야 한다.\n일관성 있는 협력 방식이 무너지게 하지 않게 해라 결론: 유연성이 필요한 곳에 추상화를 사용하라.\n코드 재사용, 상속, 합성 코드 재사용을 위해서는 상속보다 합성(composition) 이 더 좋은 방법\nMovie가 DiscountPolicy의 인터페이스를 통해 코드를 재사용하는 방법이 바로 합성 인터페이스에 정의된 메시지를 통해서만 코드를 재사용하는 방법을 합성이라 한다. 상속은 캡슐화를 위반하고, 설계를 유연하지 못하기에 설계에 안 좋은 영향을 미친다.\n상속하기 위해서는 부모 클래스 구조를 잘 알고 있어야 한다. 부모의 내부 구현이 자식에게 노출된다. 캡슐화가 약해짐 상속은 부모, 자식 관계를 컴파일 시점에 결정 =\u003e 설계가 유연해지 못하게 됨\n상속보다 인스턴스 변수로 관계를 연결한 설계가 더 유연하다.\nchangeDiscountPolicy 함수 추가 Reference 오브젝트 (조영호) https://product.kyobobook.co.kr/detail/S000001766367 ","wordCount":"1094","inLanguage":"en","image":"http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2024-02-02T11:30:03Z","dateModified":"2024-02-02T11:30:03Z","author":{"@type":"Person","name":"2taezeat"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/posts/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-ch2.-%EA%B0%9D%EC%B2%B4%EC%A7%80%ED%96%A5-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/"},"publisher":{"@type":"Organization","name":"2taezeat, blog","logo":{"@type":"ImageObject","url":"http://localhost:1313/icon/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="2taezeat blog (Alt + H)"><img src=http://localhost:1313/icon/apple-touch-icon.png alt aria-label=logo height=30>2taezeat blog</a><div class=logo-switches></div></div><ul id=menu><li><a href=http://localhost:1313/tags/ title=Tags><span>Tags</span></a></li><li><a href=http://localhost:1313/archives/ title=Archives><span>Archives</span></a></li><li><a href=http://localhost:1313/searchs/ title=Search><span>Search</span></a></li><li><a href=https://github.com/2taezeat title=Github><span>Github</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">[오브젝트] ch02. 객체지향 프로그래밍</h1><div class=post-description>ch02. 객체지향 프로그래밍</div><div class=post-meta><span title='2024-02-02 11:30:03 +0000 +0000'>2024-02-02</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;1094 words&nbsp;·&nbsp;2taezeat</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#2-객체지향-프로그래밍>2. 객체지향 프로그래밍</a><ul><li><ul><li><a href=#자율적인-객체>자율적인 객체</a></li><li><a href=#협력하는-객체들의-공동체>협력하는 객체들의 공동체</a></li><li><a href=#협력에-관한-짧은-이야기>협력에 관한 짧은 이야기</a></li><li><a href=#컴파일-시간-의존성과-런타임-의존성>컴파일 시간 의존성과 런타임 의존성</a></li><li><a href=#차이에-의한-프로그래밍>차이에 의한 프로그래밍</a></li><li><a href=#상속과-인터페이스>상속과 인터페이스</a></li><li><a href=#다형성>다형성</a></li><li><a href=#추상화의-힘>추상화의 힘</a></li><li><a href=#유연한-설계>유연한 설계</a></li><li><a href=#코드-재사용-상속-합성>코드 재사용, 상속, 합성</a></li></ul></li></ul></li><li><a href=#reference>Reference</a></li></ul></nav></div></details></div><div class=post-content><h1 id=2-객체지향-프로그래밍>2. 객체지향 프로그래밍<a hidden class=anchor aria-hidden=true href=#2-객체지향-프로그래밍>#</a></h1><ul><li><p>객체지향 패러다임에서 집중 해야 하는 두 가지</p><ol><li>클래스 보다는 어떤 객체가 필요한지 고민하라</li><li>객체를 독립적인 존재가 아니라 기능을 구현하기 위해 협력하는 공동체의 일원으로 봐야 한다.</li></ol></li><li><p><strong>도메인(domain)</strong>: 문제를 해결하기 위해 사용자가 프로그램을 사용하는 분야</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>class</span> <span class=nc>Screening</span><span class=p>(</span><span class=k>private</span> <span class=k>val</span> <span class=py>movie</span><span class=p>:</span> <span class=n>Movie</span><span class=p>,</span> <span class=k>private</span> <span class=k>val</span> <span class=py>sequence</span><span class=p>:</span> <span class=n>Int</span><span class=p>,</span> <span class=k>private</span> <span class=k>val</span> <span class=py>whenScreened</span><span class=p>:</span> <span class=n>LocalDateTime</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>fun</span> <span class=nf>getStartTime</span><span class=p>()</span> <span class=p>=</span> <span class=n>whenScreened</span>
</span></span><span class=line><span class=cl>    <span class=k>fun</span> <span class=nf>isSequence</span><span class=p>(</span><span class=n>sequence</span><span class=p>:</span> <span class=n>Int</span><span class=p>)</span> <span class=p>=</span> <span class=k>this</span><span class=p>.</span><span class=n>sequence</span> <span class=o>==</span> <span class=n>sequence</span>
</span></span><span class=line><span class=cl>    <span class=k>fun</span> <span class=nf>getMovieFee</span><span class=p>()</span> <span class=p>=</span> <span class=n>movie</span><span class=p>.</span><span class=n>fee</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>fun</span> <span class=nf>reserve</span><span class=p>(</span><span class=n>customer</span><span class=p>:</span> <span class=n>Customer</span><span class=p>,</span> <span class=n>audienceCount</span><span class=p>:</span> <span class=n>Int</span><span class=p>)</span> <span class=p>=</span>
</span></span><span class=line><span class=cl>        <span class=n>Reservation</span><span class=p>(</span><span class=n>customer</span><span class=p>,</span> <span class=k>this</span><span class=p>,</span> <span class=n>calculateFee</span><span class=p>(</span><span class=n>audienceCount</span><span class=p>),</span> <span class=n>audienceCount</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>private</span> <span class=k>fun</span> <span class=nf>calculateFee</span><span class=p>(</span><span class=n>audienceCount</span><span class=p>:</span> <span class=n>Int</span><span class=p>)</span> <span class=p>=</span> <span class=n>movie</span><span class=p>.</span><span class=n>calculateMovieFee</span><span class=p>(</span><span class=k>this</span><span class=p>).</span><span class=n>times</span><span class=p>(</span><span class=n>audienceCount</span><span class=p>.</span><span class=n>toDouble</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Money</span><span class=p>(</span><span class=k>private</span> <span class=k>val</span> <span class=py>amount</span><span class=p>:</span> <span class=n>BigDecimal</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>companion</span> <span class=k>object</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>val</span> <span class=py>ZERO</span> <span class=p>=</span> <span class=n>wons</span><span class=p>(</span><span class=m>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>fun</span> <span class=nf>wons</span><span class=p>(</span><span class=n>amount</span><span class=p>:</span> <span class=n>Long</span><span class=p>)</span> <span class=p>=</span> <span class=n>Money</span><span class=p>(</span><span class=nc>BigDecimal</span><span class=p>.</span><span class=n>valueOf</span><span class=p>(</span><span class=n>amount</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=k>fun</span> <span class=nf>wons</span><span class=p>(</span><span class=n>amount</span><span class=p>:</span> <span class=n>Double</span><span class=p>)</span> <span class=p>=</span> <span class=n>Money</span><span class=p>(</span><span class=nc>BigDecimal</span><span class=p>.</span><span class=n>valueOf</span><span class=p>(</span><span class=n>amount</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>fun</span> <span class=nf>plus</span><span class=p>(</span><span class=n>amount</span><span class=p>:</span> <span class=n>Money</span><span class=p>)</span> <span class=p>=</span> <span class=n>Money</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=n>amount</span><span class=p>.</span><span class=n>add</span><span class=p>(</span><span class=n>amount</span><span class=p>.</span><span class=n>amount</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=k>fun</span> <span class=nf>minus</span><span class=p>(</span><span class=n>amount</span><span class=p>:</span> <span class=n>Money</span><span class=p>)</span> <span class=p>=</span> <span class=n>Money</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=n>amount</span><span class=p>.</span><span class=n>subtract</span><span class=p>(</span><span class=n>amount</span><span class=p>.</span><span class=n>amount</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=k>fun</span> <span class=nf>times</span><span class=p>(</span><span class=n>percent</span><span class=p>:</span> <span class=n>Double</span><span class=p>)</span> <span class=p>=</span> <span class=n>Money</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=n>amount</span><span class=p>.</span><span class=n>multiply</span><span class=p>(</span><span class=nc>BigDecimal</span><span class=p>.</span><span class=n>valueOf</span><span class=p>(</span><span class=n>percent</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    <span class=k>fun</span> <span class=nf>isLessThan</span><span class=p>(</span><span class=n>other</span><span class=p>:</span> <span class=n>Money</span><span class=p>)</span> <span class=p>=</span> <span class=n>amount</span> <span class=p>&lt;</span> <span class=n>other</span><span class=p>.</span><span class=n>amount</span>
</span></span><span class=line><span class=cl>    <span class=k>fun</span> <span class=nf>isGreaterThan</span><span class=p>(</span><span class=n>other</span><span class=p>:</span> <span class=n>Money</span><span class=p>)</span> <span class=p>=</span> <span class=n>amount</span> <span class=o>&gt;=</span> <span class=n>other</span><span class=p>.</span><span class=n>amount</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>interface</span> <span class=nc>DiscountPolicy</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>fun</span> <span class=nf>calculateDiscountAmount</span><span class=p>(</span><span class=n>screening</span><span class=p>:</span> <span class=n>Screening</span><span class=p>):</span> <span class=n>Money</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>abstract</span> <span class=k>class</span> <span class=nc>DefaultDiscountPolicy</span><span class=p>(</span><span class=k>vararg</span> <span class=n>conditions</span><span class=p>:</span> <span class=n>DisCountCondition</span><span class=p>)</span> <span class=p>:</span> <span class=n>DiscountPolicy</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>private</span> <span class=k>val</span> <span class=py>conditions</span><span class=p>:</span> <span class=n>MutableList</span><span class=p>&lt;</span><span class=n>DisCountCondition</span><span class=p>&gt;</span> <span class=p>=</span> <span class=n>conditions</span><span class=p>.</span><span class=n>toMutableList</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>override</span> <span class=k>fun</span> <span class=nf>calculateDiscountAmount</span><span class=p>(</span><span class=n>screening</span><span class=p>:</span> <span class=n>Screening</span><span class=p>):</span> <span class=n>Money</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>conditions</span><span class=p>.</span><span class=n>forEach</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=k>it</span><span class=p>.</span><span class=n>isSatisfiedBy</span><span class=p>(</span><span class=n>screening</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>getDiscountAmount</span><span class=p>(</span><span class=n>screening</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nc>Money</span><span class=p>.</span><span class=n>ZERO</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>abstract</span> <span class=k>fun</span> <span class=nf>getDiscountAmount</span><span class=p>(</span><span class=n>screening</span><span class=p>:</span> <span class=n>Screening</span><span class=p>):</span> <span class=n>Money</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>AmountDiscountPolicy</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=k>private</span> <span class=k>val</span> <span class=py>discountMoney</span><span class=p>:</span> <span class=n>Money</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>vararg</span> <span class=n>conditions</span><span class=p>:</span> <span class=n>DisCountCondition</span>
</span></span><span class=line><span class=cl><span class=p>)</span> <span class=p>:</span> <span class=n>DefaultDiscountPolicy</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>override</span> <span class=k>fun</span> <span class=nf>getDiscountAmount</span><span class=p>(</span><span class=n>screening</span><span class=p>:</span> <span class=n>Screening</span><span class=p>)</span> <span class=p>=</span> <span class=n>discountMoney</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PercentDiscountPolicy</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=k>private</span> <span class=k>val</span> <span class=py>percent</span><span class=p>:</span> <span class=n>Double</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>vararg</span> <span class=n>conditions</span><span class=p>:</span> <span class=n>DisCountCondition</span>
</span></span><span class=line><span class=cl><span class=p>)</span> <span class=p>:</span> <span class=n>DefaultDiscountPolicy</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>override</span> <span class=k>fun</span> <span class=nf>getDiscountAmount</span><span class=p>(</span><span class=n>screening</span><span class=p>:</span> <span class=n>Screening</span><span class=p>)</span> <span class=p>=</span> <span class=n>screening</span><span class=p>.</span><span class=n>getMovieFee</span><span class=p>().</span><span class=n>times</span><span class=p>(</span><span class=n>percent</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>interface</span> <span class=nc>DisCountCondition</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>fun</span> <span class=nf>isSatisfiedBy</span><span class=p>(</span><span class=n>screening</span><span class=p>:</span> <span class=n>Screening</span><span class=p>):</span> <span class=n>Boolean</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>SequenceCondition</span><span class=p>(</span><span class=k>private</span> <span class=k>val</span> <span class=py>sequence</span><span class=p>:</span> <span class=n>Int</span><span class=p>)</span> <span class=p>:</span> <span class=n>DisCountCondition</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>override</span> <span class=k>fun</span> <span class=nf>isSatisfiedBy</span><span class=p>(</span><span class=n>screening</span><span class=p>:</span> <span class=n>Screening</span><span class=p>)</span> <span class=p>=</span> <span class=n>screening</span><span class=p>.</span><span class=n>isSequence</span><span class=p>(</span><span class=n>sequence</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PeriodCondition</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=k>private</span> <span class=k>val</span> <span class=py>dayOfWeek</span><span class=p>:</span> <span class=n>DayOfWeek</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>private</span> <span class=k>val</span> <span class=py>startTime</span><span class=p>:</span> <span class=n>LocalTime</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>private</span> <span class=k>val</span> <span class=py>endTime</span><span class=p>:</span> <span class=n>LocalTime</span>
</span></span><span class=line><span class=cl><span class=p>)</span> <span class=p>:</span> <span class=n>DisCountCondition</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>override</span> <span class=k>fun</span> <span class=nf>isSatisfiedBy</span><span class=p>(</span><span class=n>screening</span><span class=p>:</span> <span class=n>Screening</span><span class=p>)</span> <span class=p>=</span>
</span></span><span class=line><span class=cl>        <span class=n>screening</span><span class=p>.</span><span class=n>getStartTime</span><span class=p>().</span><span class=n>dayOfWeek</span><span class=p>.</span><span class=n>equals</span><span class=p>(</span><span class=n>dayOfWeek</span><span class=p>)</span> <span class=o>&amp;&amp;</span> <span class=n>startTime</span> <span class=o>&lt;=</span> <span class=n>screening</span><span class=p>.</span><span class=n>getStartTime</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=p>.</span><span class=n>toLocalTime</span><span class=p>()</span> <span class=o>&amp;&amp;</span> <span class=n>endTime</span> <span class=o>&gt;=</span> <span class=n>screening</span><span class=p>.</span><span class=n>getStartTime</span><span class=p>().</span><span class=n>toLocalTime</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>NoneDisCountPolicy</span><span class=p>()</span> <span class=p>:</span> <span class=n>DiscountPolicy</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>override</span> <span class=k>fun</span> <span class=nf>calculateDiscountAmount</span><span class=p>(</span><span class=n>screening</span><span class=p>:</span> <span class=n>Screening</span><span class=p>)</span> <span class=p>=</span> <span class=nc>Money</span><span class=p>.</span><span class=n>ZERO</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>data</span> <span class=k>class</span> <span class=nc>Movie</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>title</span><span class=p>:</span> <span class=n>String</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>runningTime</span><span class=p>:</span> <span class=n>Duration</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>fee</span><span class=p>:</span> <span class=n>Money</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>discountPolicy</span><span class=p>:</span> <span class=n>DiscountPolicy</span>
</span></span><span class=line><span class=cl><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>fun</span> <span class=nf>calculateMovieFee</span><span class=p>(</span><span class=n>screening</span><span class=p>:</span> <span class=n>Screening</span><span class=p>)</span> <span class=p>=</span> <span class=n>fee</span><span class=p>.</span><span class=n>minus</span><span class=p>(</span><span class=n>discountPolicy</span><span class=p>.</span><span class=n>calculateDiscountAmount</span><span class=p>(</span><span class=n>screening</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=k>fun</span> <span class=nf>changeDiscountPolicy</span><span class=p>(</span><span class=n>discountPolicy</span><span class=p>:</span> <span class=n>DiscountPolicy</span><span class=p>)</span> <span class=p>=</span> <span class=k>this</span><span class=p>.</span><span class=n>copy</span><span class=p>(</span><span class=n>discountPolicy</span> <span class=p>=</span> <span class=n>discountPolicy</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>data</span> <span class=k>class</span> <span class=nc>Reservation</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>customer</span><span class=p>:</span> <span class=n>Customer</span><span class=p>,</span> <span class=k>val</span> <span class=py>screening</span><span class=p>:</span> <span class=n>Screening</span><span class=p>,</span> <span class=k>val</span> <span class=py>fee</span><span class=p>:</span> <span class=n>Money</span><span class=p>,</span> <span class=k>val</span> <span class=py>audienceCount</span><span class=p>:</span> <span class=n>Int</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Customer</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>/////////////////////////
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>fun</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>var</span> <span class=py>avatar</span> <span class=p>=</span> <span class=n>Movie</span><span class=p>(</span><span class=s2>&#34;아바타&#34;</span><span class=p>,</span> <span class=m>210.</span><span class=n>minutes</span><span class=p>,</span> <span class=nc>Money</span><span class=p>.</span><span class=n>wons</span><span class=p>(</span><span class=m>10000</span><span class=p>),</span> <span class=n>NoneDisCountPolicy</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=n>println</span><span class=p>(</span><span class=n>avatar</span><span class=p>.</span><span class=n>discountPolicy</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>avatar</span> <span class=p>=</span> <span class=n>avatar</span><span class=p>.</span><span class=n>changeDiscountPolicy</span><span class=p>(</span><span class=n>PercentDiscountPolicy</span><span class=p>(</span><span class=m>0.1</span><span class=p>,</span> <span class=n>SequenceCondition</span><span class=p>(</span><span class=m>1</span><span class=p>),</span> <span class=n>SequenceCondition</span><span class=p>(</span><span class=m>6</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    <span class=n>println</span><span class=p>(</span><span class=n>avatar</span><span class=p>.</span><span class=n>discountPolicy</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=자율적인-객체>자율적인 객체<a hidden class=anchor aria-hidden=true href=#자율적인-객체>#</a></h3><ol><li>객체는 <strong>상태(State)</strong> 와 <strong>행동(Behavior)</strong> 을 함께 가진 복합적인 존재</li><li>객체는 스스로 판단하고 행동하는 자율적인 존재</li></ol><ul><li><p><strong>캡슐화</strong>: <strong>데이터</strong>와 <strong>기능</strong>을 객체 내부로 함께 묶는 것</p></li><li><p>OOP 언어들은 <strong>접근 수정자</strong>를 통해, 외부에서의 접근을 통제할 수 있는 <strong>접근 제어</strong> 매커니즘 을 제공</p></li><li><p>캡슐화와 접근 제어는 객체를 두 부분으로 나눈다.</p><ol><li><strong>퍼블릭 인터페이스</strong>: 외부에서 접근가능한 부분</li><li><strong>구현(implementation)</strong>: 외부에서 접근 불가능하고 오직 내부에서만 접근 가능한 부분</li></ol></li><li><p><strong>설계</strong>가 필요한 이유는 <strong>변경</strong>을 관리하기 위함이다.</p><ul><li>OOP는 의존성을 적절히 관리해서, 변경에 대한 파급효과를 제어할 수 있는 다양한 방법 제공, 대표적으로 <strong>접근 제어</strong></li></ul></li></ul><h3 id=협력하는-객체들의-공동체>협력하는 객체들의 공동체<a hidden class=anchor aria-hidden=true href=#협력하는-객체들의-공동체>#</a></h3><ul><li>OOP의 장점은 객체를 이용해 <strong>도메인의 의미</strong>를 풍부하게 표현 할 수 있다는 것<ul><li>의미를 좀 더 명시적이고 분명하게 표현할 수 있다면 객체를 사용해라</li><li>그 개념이 비록 하나의 인스턴스 변수만 포함하더라도 개념을 명시적으로 표현하는 것은 설계의 명확성과 유연성을 높히는 첫 걸음이다.</li></ul></li></ul><h3 id=협력에-관한-짧은-이야기>협력에 관한 짧은 이야기<a hidden class=anchor aria-hidden=true href=#협력에-관한-짧은-이야기>#</a></h3><ul><li>객체는 다른 객체의 인터페이스에 공개된 행동을 수행하도록 <strong>request(요청)</strong> 한다.</li><li>요청 받은 객체는 자율적인 방법에 따라 요청을 처리하고 <strong>response(응답)</strong> 한다.</li><li>객체가 다른 객체와 상호작용할 수 있는 유일한 방법은 <strong>메시지를 전송(send)</strong> 하는 것뿐이다.</li><li>다른 객체에게 요청이 도달할 때 해당 객체가 <strong>메시지를 수신(receive)</strong> 했다고 이야기 한다.</li><li>수신된 메시지를 처리하기 위한 자신만의 방법을 <strong>메서드(method)</strong> 라고 한다.</li><li>메시지와 메서드의 구분에서부터 <strong>다형성(polymorphism)</strong> 개념이 시작한다.</li></ul><h3 id=컴파일-시간-의존성과-런타임-의존성>컴파일 시간 의존성과 런타임 의존성<a hidden class=anchor aria-hidden=true href=#컴파일-시간-의존성과-런타임-의존성>#</a></h3><ul><li><p>코드 의존성(컴파일 의존성)과 런타임 의존성이 서로 다를 수 있다.</p><ul><li>클래스 사이의 의존성과 객체 사이의 의존성은 다를 수 있다.</li><li>두 개가 다를수록 코드를 이해하기 어려워진다.</li><li>두 개가 다를수록 코드는 더 유연해지고 확장 가능하다</li><li>설계는 트레이드오프의 산물이다.</li></ul></li><li><p>설계가 유연해질수록 코드를 이해하고 디버깅하기는 점점 더 어려워진다. (트레이드 오프)</p><ul><li>반대로, 유연성을 억제하면, 재사용성과 확장 가능성은 낮아진다.</li><li>훌륭한 객체지향 설계자는 항상 유연성과 가독성이에서 고민해야 한다.</li></ul></li></ul><h3 id=차이에-의한-프로그래밍>차이에 의한 프로그래밍<a hidden class=anchor aria-hidden=true href=#차이에-의한-프로그래밍>#</a></h3><ul><li><strong>차이에 의한 프로그래밍(progamming by difference)</strong>: 부모 클래스와 다른 부분만을 추가해서 새로운 클래스를 쉽고 빠르게 만드는 방법</li></ul><h3 id=상속과-인터페이스>상속과 인터페이스<a hidden class=anchor aria-hidden=true href=#상속과-인터페이스>#</a></h3><ul><li>상속이 가치 있는 이유는 재사용도 있지만, 부모 클래스가 제공하는 모든 인터페이스를 자식 클래스가 물려받을 수 있기 때문이다.</li><li>인터페이스는 객체가 이해할 수 있는 메시지의 목록을 정의한다.</li><li>외부 객체는 자식 크래스를 부모 클래스와 동일한 타입으로 간주 할 수 있다.</li><li>자식 클래스가 부모 클래스를 대신하는 것을 <strong>업캐스팅(upcasting)</strong> 이라 한다.</li></ul><h3 id=다형성>다형성<a hidden class=anchor aria-hidden=true href=#다형성>#</a></h3><ul><li><p>동일한 <strong>메시지</strong>를 전송하지만 실제로 어떤 <strong>메서드</strong>가 실행될 것인지는 <strong>메시지</strong>를 수신하는 객체의 클래스가 무엇이냐에 따라 달라지는 것 <strong>다형성</strong>이라 한다.</p></li><li><p>다형성은 컴파일 시간 의존성과 런타임 시간 의존성이 다를 수 있다는 사실에 기반으로 한다.</p></li><li><p>다형성이란 동일한 메시지를 수신했을 때 객체에 타입에 따라 다르게 응답할 수 있는 능력</p><ul><li>다형적인 협력에 참여할 수 있는 이유는 객체가 동일한 인터페이스를 물려 받았기 때문</li></ul></li><li><p>다형성을 구현하는 방법은 매우 다양하지만, 메시지에 대한 실행 메서드를 컴파일이 아니라 런타임에 결정한다는 공통점이 있다.</p><ul><li>지연(lazy) 바인딩, 동적(dynamic) 바인딩 이라 한다.</li><li>컴파일에 결정하는 것을 초기(early) 바인딩, 정적(static) 바인딩 이라한다.</li><li>다형성은 추상적인 개념이며, 구현 할 수 있는 방법이 상속 말고도 다양하다.</li></ul></li><li><p>구현 상속: 서브클래싱(subclassing)</p><ul><li>순수하게 코드를 재사용하기 위해서 상속하는 것</li><li>변경에 취약할 수 있다</li></ul></li><li><p>인터페이스 상속: 서브타이핑(subtyping)</p><ul><li>다형적인 협력을 위해 부모, 자식이 인터페이스를 공유할 수 있도록 상속하는 것</li><li>상속은 인터페이스 상속을 위해 사용해야 한다</li></ul></li></ul><h3 id=추상화의-힘>추상화의 힘<a hidden class=anchor aria-hidden=true href=#추상화의-힘>#</a></h3><ul><li><p>추상화의 장점</p><ol><li>요구사항의 정책을 높은 수준에서 서술할 수 있다. (협력 흐름을 기술한다.)<ul><li>세부적인 내용을 무시한 채 상위 정채을 쉽고 간단하게 표현 가능</li><li>표현의 수준을 조정하는 것을 가능하게 한다.</li><li>Ex) &ldquo;영화 예매 요금은 최대 하나의 &lsquo;할인 정책&rsquo;과 다수의 &lsquo;할인 조건&rsquo;을 이용해 계산할 수 있다.&rdquo;</li></ul></li><li>설계가 좀 더 유연해진다.<ul><li>설계가 구체적인 상황(가령, 예외 케이스)에 결합되는 것을 방지하기 때문</li></ul></li></ol></li><li><p>디자인 패턴이나 프레임워크 모두 추상화를 이용해 상위정책을 정의하는 객체지향 메커니즘을 활용한다.</p></li></ul><h3 id=유연한-설계>유연한 설계<a hidden class=anchor aria-hidden=true href=#유연한-설계>#</a></h3><ul><li><p>항상 예외 케이스를 최소화하고 일관성을 유지할 수 있는 방법을 선택해야 한다.</p><ul><li>일관성 있는 협력 방식이 무너지게 하지 않게 해라</li></ul></li><li><p>결론: <strong>유연성</strong>이 필요한 곳에 <strong>추상화</strong>를 사용하라.</p></li></ul><h3 id=코드-재사용-상속-합성>코드 재사용, 상속, 합성<a hidden class=anchor aria-hidden=true href=#코드-재사용-상속-합성>#</a></h3><ul><li><p>코드 재사용을 위해서는 상속보다 <strong>합성(composition)</strong> 이 더 좋은 방법</p><ul><li><code>Movie</code>가 <code>DiscountPolicy</code>의 인터페이스를 통해 코드를 재사용하는 방법이 바로 합성</li><li>인터페이스에 정의된 메시지를 통해서만 코드를 재사용하는 방법을 <strong>합성</strong>이라 한다.</li></ul></li><li><p>상속은 캡슐화를 위반하고, 설계를 유연하지 못하기에 설계에 안 좋은 영향을 미친다.</p><ul><li>상속하기 위해서는 부모 클래스 구조를 잘 알고 있어야 한다.</li><li>부모의 내부 구현이 자식에게 노출된다. 캡슐화가 약해짐</li></ul></li><li><p>상속은 부모, 자식 관계를 <strong>컴파일 시점</strong>에 결정 => 설계가 유연해지 못하게 됨</p></li><li><p>상속보다 <strong>인스턴스 변수</strong>로 관계를 연결한 설계가 더 유연하다.</p><ul><li><code>changeDiscountPolicy 함수</code> 추가</li></ul></li></ul><h1 id=reference>Reference<a hidden class=anchor aria-hidden=true href=#reference>#</a></h1><ul><li>오브젝트 (조영호) <a href=https://product.kyobobook.co.kr/detail/S000001766367>https://product.kyobobook.co.kr/detail/S000001766367</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/oop/>OOP</a></li><li><a href=http://localhost:1313/tags/kotlin/>Kotlin</a></li></ul><nav class=paginav><a class=prev href=http://localhost:1313/posts/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-ch3.-%EC%97%AD%ED%95%A0-%EC%B1%85%EC%9E%84-%ED%98%91%EB%A0%A5/><span class=title>« Prev</span><br><span>[오브젝트] ch03. 역할, 책임, 협력</span>
</a><a class=next href=http://localhost:1313/posts/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-ch01.-%EA%B0%9D%EC%B2%B4-%EC%84%A4%EA%B3%84/><span class=title>Next »</span><br><span>[오브젝트] ch01. 객체, 설계</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share [오브젝트] ch02. 객체지향 프로그래밍 on x" href="https://x.com/intent/tweet/?text=%5b%ec%98%a4%eb%b8%8c%ec%a0%9d%ed%8a%b8%5d%20ch02.%20%ea%b0%9d%ec%b2%b4%ec%a7%80%ed%96%a5%20%ed%94%84%eb%a1%9c%ea%b7%b8%eb%9e%98%eb%b0%8d&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8-ch2.-%25EA%25B0%259D%25EC%25B2%25B4%25EC%25A7%2580%25ED%2596%25A5-%25ED%2594%2584%25EB%25A1%259C%25EA%25B7%25B8%25EB%259E%2598%25EB%25B0%258D%2f&amp;hashtags=OOP%2cKotlin"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [오브젝트] ch02. 객체지향 프로그래밍 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8-ch2.-%25EA%25B0%259D%25EC%25B2%25B4%25EC%25A7%2580%25ED%2596%25A5-%25ED%2594%2584%25EB%25A1%259C%25EA%25B7%25B8%25EB%259E%2598%25EB%25B0%258D%2f&amp;title=%5b%ec%98%a4%eb%b8%8c%ec%a0%9d%ed%8a%b8%5d%20ch02.%20%ea%b0%9d%ec%b2%b4%ec%a7%80%ed%96%a5%20%ed%94%84%eb%a1%9c%ea%b7%b8%eb%9e%98%eb%b0%8d&amp;summary=%5b%ec%98%a4%eb%b8%8c%ec%a0%9d%ed%8a%b8%5d%20ch02.%20%ea%b0%9d%ec%b2%b4%ec%a7%80%ed%96%a5%20%ed%94%84%eb%a1%9c%ea%b7%b8%eb%9e%98%eb%b0%8d&amp;source=http%3a%2f%2flocalhost%3a1313%2fposts%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8-ch2.-%25EA%25B0%259D%25EC%25B2%25B4%25EC%25A7%2580%25ED%2596%25A5-%25ED%2594%2584%25EB%25A1%259C%25EA%25B7%25B8%25EB%259E%2598%25EB%25B0%258D%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [오브젝트] ch02. 객체지향 프로그래밍 on reddit" href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8-ch2.-%25EA%25B0%259D%25EC%25B2%25B4%25EC%25A7%2580%25ED%2596%25A5-%25ED%2594%2584%25EB%25A1%259C%25EA%25B7%25B8%25EB%259E%2598%25EB%25B0%258D%2f&title=%5b%ec%98%a4%eb%b8%8c%ec%a0%9d%ed%8a%b8%5d%20ch02.%20%ea%b0%9d%ec%b2%b4%ec%a7%80%ed%96%a5%20%ed%94%84%eb%a1%9c%ea%b7%b8%eb%9e%98%eb%b0%8d"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [오브젝트] ch02. 객체지향 프로그래밍 on facebook" href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8-ch2.-%25EA%25B0%259D%25EC%25B2%25B4%25EC%25A7%2580%25ED%2596%25A5-%25ED%2594%2584%25EB%25A1%259C%25EA%25B7%25B8%25EB%259E%2598%25EB%25B0%258D%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [오브젝트] ch02. 객체지향 프로그래밍 on whatsapp" href="https://api.whatsapp.com/send?text=%5b%ec%98%a4%eb%b8%8c%ec%a0%9d%ed%8a%b8%5d%20ch02.%20%ea%b0%9d%ec%b2%b4%ec%a7%80%ed%96%a5%20%ed%94%84%eb%a1%9c%ea%b7%b8%eb%9e%98%eb%b0%8d%20-%20http%3a%2f%2flocalhost%3a1313%2fposts%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8-ch2.-%25EA%25B0%259D%25EC%25B2%25B4%25EC%25A7%2580%25ED%2596%25A5-%25ED%2594%2584%25EB%25A1%259C%25EA%25B7%25B8%25EB%259E%2598%25EB%25B0%258D%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [오브젝트] ch02. 객체지향 프로그래밍 on telegram" href="https://telegram.me/share/url?text=%5b%ec%98%a4%eb%b8%8c%ec%a0%9d%ed%8a%b8%5d%20ch02.%20%ea%b0%9d%ec%b2%b4%ec%a7%80%ed%96%a5%20%ed%94%84%eb%a1%9c%ea%b7%b8%eb%9e%98%eb%b0%8d&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8-ch2.-%25EA%25B0%259D%25EC%25B2%25B4%25EC%25A7%2580%25ED%2596%25A5-%25ED%2594%2584%25EB%25A1%259C%25EA%25B7%25B8%25EB%259E%2598%25EB%25B0%258D%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [오브젝트] ch02. 객체지향 프로그래밍 on ycombinator" href="https://news.ycombinator.com/submitlink?t=%5b%ec%98%a4%eb%b8%8c%ec%a0%9d%ed%8a%b8%5d%20ch02.%20%ea%b0%9d%ec%b2%b4%ec%a7%80%ed%96%a5%20%ed%94%84%eb%a1%9c%ea%b7%b8%eb%9e%98%eb%b0%8d&u=http%3a%2f%2flocalhost%3a1313%2fposts%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8-ch2.-%25EA%25B0%259D%25EC%25B2%25B4%25EC%25A7%2580%25ED%2596%25A5-%25ED%2594%2584%25EB%25A1%259C%25EA%25B7%25B8%25EB%259E%2598%25EB%25B0%258D%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><script src=https://utteranc.es/client.js repo=2taezeat/blog_comment issue-term=pathname label=comment theme=github-light crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2024 <a href=http://localhost:1313/>2taezeat, blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>