<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>[오브젝트] ch05. 책임 할당하기 | 2taezeat, blog</title>
<meta name=keywords content="OOP,Kotlin"><meta name=description content="ch05. 책임 할당하기"><meta name=author content="2taezeat"><link rel=canonical href=https://2taezeat.github.io/posts/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-ch05.-%EC%B1%85%EC%9E%84-%ED%95%A0%EB%8B%B9%ED%95%98%EA%B8%B0/><meta name=google-site-verification content="YaEERzgrvu-ZwPg7gswZdTzRMufkHw3uIH7i8hVal1c"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.d54e889b3efa74e861d01cb8a15d5c39543cc6de6faafd93fc37426183137d6d.css integrity="sha256-1U6Imz76dOhh0By4oV1cOVQ8xt5vqv2T/DdCYYMTfW0=" rel="preload stylesheet" as=style><link rel=icon href=https://2taezeat.github.io/icon/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://2taezeat.github.io/icon/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://2taezeat.github.io/icon/favicon-32x32.png><link rel=apple-touch-icon href=https://2taezeat.github.io/icon/apple-touch-icon.png><link rel=mask-icon href=https://2taezeat.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://2taezeat.github.io/posts/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-ch05.-%EC%B1%85%EC%9E%84-%ED%95%A0%EB%8B%B9%ED%95%98%EA%B8%B0/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="[오브젝트] ch05. 책임 할당하기"><meta property="og:description" content="ch05. 책임 할당하기"><meta property="og:type" content="article"><meta property="og:url" content="https://2taezeat.github.io/posts/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-ch05.-%EC%B1%85%EC%9E%84-%ED%95%A0%EB%8B%B9%ED%95%98%EA%B8%B0/"><meta property="og:image" content="https://2taezeat.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-05-05T11:30:03+00:00"><meta property="article:modified_time" content="2024-05-05T11:30:03+00:00"><meta property="og:site_name" content="2taezeat, blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://2taezeat.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="[오브젝트] ch05. 책임 할당하기"><meta name=twitter:description content="ch05. 책임 할당하기"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://2taezeat.github.io/posts/"},{"@type":"ListItem","position":2,"name":"[오브젝트] ch05. 책임 할당하기","item":"https://2taezeat.github.io/posts/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-ch05.-%EC%B1%85%EC%9E%84-%ED%95%A0%EB%8B%B9%ED%95%98%EA%B8%B0/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[오브젝트] ch05. 책임 할당하기","name":"[오브젝트] ch05. 책임 할당하기","description":"ch05. 책임 할당하기","keywords":["OOP","Kotlin"],"articleBody":"5. 책임 할당하기 책임 주도 설계를 향해 데이터 중심 =\u003e 책임 중심 데이터보다 행동을 먼저 결정하라 협력이라는 문맥 안에서 책임을 결정하라 협력이라는 문맥 안에서 책임을 결정하라 책임은 객체의 입장이 아니라 객체가 참여하는 협력에 적합해야 한다. 메시지를 전송하는 클라이언트의 의도에 적합한 책임을 할당해야 한다 메시지가 객체를 선택하게 해야 한다 클래스 기반 설계에서 메시지 기반 설계로 전환해야 한다 “이 클래스가 무엇을 해야 하지?” =\u003e “메시지를 전송해야 하는데 누구에게 전송해야 하지” 메시지를 전송하기 때문에 객체를 갖게 된다 메시지를 수신하기로 결정된 객체는 메시지를 처리할 책임을 할당 받게 된다 메시지를 먼저 결정하기에, 메시지 전송자의 관점에서 수신자가 깔끔하게 캡슐화 된다 책임 할당을 위한 GRASP 패턴 General Responsibility Assignment Software Pattern: 크레이크 라만이 패턴 형식으로 제안 도메인 개념에서 출발하기 도메인 개념들을 책임 할당의 대상으로 사용하면 코드에 도메인의 모습을 투영하기가 좀 더 수월해진다. 도메인 개념을 정리하는 데 너무 많은 시간을 들이지 말고 빠르게 설계와 구현을 진행하라 올바른 도메인 모델이란 존재하지 않는다 정보 전문가에게 책임을 할당하라 책임을 전송된 메시지로 간주하고, 메시지를 책임질 첫 번째 객체를 선택하는 것으로 설계를 시한다\nEx) 애플리케이션은 영화를 예매할 책임이 있다. 첫 번째 질문: 메시지를 전송할 객체는 무엇을 원하는가?\n메시지의 이름으로 “예매하라” 가 적절하다 두 번째 질문: 메시지를 수신할 적합한 객체는 누구인가?\n책임을 수행할 정보를 알고 있는 객체에게 책임을 할당=\u003e 정보 전문가(Information Expert) 패턴\n가장 기본적인 책임 할당 원칙\n책임을 수행하는 데 필요한 정보를 가지고 있는 객체에게 할당하라\n정보 전문가는 정보를 알고 있지만, 그 정보를 꼭 데이터로 저장하고 있을 필요는 없다\n높은 응집도와 낮은 결합도 객체에 책임을 할당할 때 다양한 대안이 존재한다면 높은 응집도와 낮은 결합도 측면에서 생각해라 Low Coupling, High Cohesion 패턴이라고 한다 Low Coupling 의존성을 낮추고 변화의 영향을 줄이며 재사용성을 증가시킬 수 있는 방법 설계의 전체적인 결합도가 낮게 유지되도록 책임을 할당하라 Movie와 DiscountCondition은 이미 결합돼 있다. Screening과 DiscountCondition이 협력 할 경우 새로운 결합도가 생성된다. 따라서 Movie와 DiscountCondition이 렵력하는 것이 더 나은 설계 대안이다. High Cohesion 어떻게 복잡성을 관리할 수 있는 수준으로 유지하는 법: 높은 응집도를 유지할 수 있게 책임을 할당해라 Screening과 DiscountCondition이 협력 할 경우 Screening은 영화 요금 계산과 관련된 책임 일부를 떠안아야 한다. 예매 요금을 계산하는 방식이 변경될 경우 Screening도 함께 변경되어야 한다 서로 다른 이유로 변경되는 책임을 짊어지게 되므로 응집도 낮아짐 창조자에게 객체 생성 책임을 할당하라 영화 예매 협력의 최종 결과물은 Reservation 인스턴스를 반환하는 것 Creator(창조자) 패턴은 객체를 생성할 책임을 어떤 객체에게 할당하지에 대한 지침을 제공 객체 A가, 아래 조건을 최대한 만족하는 B에게 객체 생성 책임을 할당해라 B가 A 객체를 포함하거나 참조한다. B가 A 객체를 기록한다 B가 A 객체를 긴밀하게 사용한다 B가 A 객체를 초기화하는 데 필요한 데이터를 가지고 있다 (B는 A에 대한 전문가다) 이미 결합돼 있는 객체에게 생성 책임을 할당하는 것은 설계의 전체적인 결합도에 영향을 미치지 않는다. 이미 존재하는 객체 사이의 관계를 이용하기에 낮은 결합도를 유지할 수 있다. 구현을 통한 검증 DiscountCondition 개선하기 DiscountCondition 은 서로 다른 세 가지 이유로 변경될 수 있다.\n새로운 할인 조건 추가 순번 조건을 판단하는 로직 변경 기간 조건을 판단하는 로직이 변경되는 경우 DiscountCondition 은 하나 이상의 변경 이유를 가지기 때문에 응집도가 낮다\n변경에 이유에 따라 클래스를 분리해야 한다 코드를 통해 변경의 이유를 파악할 수 있는 방법\n변경 이유가 하나 이상의 이유로 변경돼야 한다면 응집도가 낮은 것\n인스턴스 변수가 초기화되는 시점을 살펴보는 것\n응집도가 높은 클래스는 인스턴스를 생성할 때 모든 속성을 함께 초기화한다 메서드들이 인스턴스 변수를 사용하는 방식\n모든 메서드가 객체의 모든 속성을 사용한다면 클래스의 응집도는 높다고 볼 수 있다 타입 분리하기 DiscountCondition 을 순번 조건과 기간 조건이라는 두 개의 독립적인 타입으로 변경 응집도가 높아지지만, 캡슐화라는 관점에서 설계 품질이 나빠졌음 다형성을 통해 분리하기 객체의 암시적인 타입에 따라 행동을 분기해야 한다면 암시적인 타입을 명시적인 클래스로 정의하고 행동을 나눔으로써 응집도 문제를 해결할 수 있다 DiscountCondition 이라는 인터페이스를 구현하는 형식으로 변경 타입을 분리하고 변화하는 행동을 각 타입의 책임으로 할당해라 Polymoorphism(다형성) 패턴 객체의 타입을 검사해서 타입에 따라 대안들을 수행하는 조건적인 논리를 사용하지말고, 다형성을 이용해 변화를 다루기 쉽게 확장해라 변경으로부터 보호하기 Movie의 관점에서 DiscountCondition 의 타입이 캡슐화된다는 것은 새로운 DiscountCondition 타입이 추가되더라도 Movie가 영향을 받지 않는다는 것을 의미 오직 DiscountCondition 인터페이스를 실체화하는 클래스를 추가하는 것으로 할인 조건의 종류를 확장할 수 있다. 캡슐화하도록 책임을 할당하는 것을 Protected Variations(변경 보호) 패턴 이라 한다. 변경될 가능성이 높으면, 캡슐화 하라 Movie 클래스 개선하기 도메인의 구조가 코드의 구조를 이끈다 변경 역시 도메인 모델의 일부이다. 도메인 모델에는 도메인 안에서 변하는 개념과 이들 사이의 관계가 투영돼 있어야 한다. 변경과 유연성 설게를 주도하는 것은 변경이다; 개발자로서 변경에 대비할 수 있는 방법 두 가지\n이해하고 수정하기 쉽게 최대한 단순하게 설계 코드를 유연하게 만드는 것 상속 대신 합성을 사용하면, 새로운 정책이 추가될 때 마다 유연한 설계가 가능하다\n도메인 모델은 단순히 도메인의 개념과 관계를 모아 놓은 것이 아니다.\n도메인 모델은 구현과 밀접한 관계를 맺어야 한다. 책임 주도 설계의 대안 수정하기 쉬운 소프트웨어로 개선하기 위해 겉으로 보이는 동작은 바꾸지 않은 채 내부 구조를 변경하는 것을 리팩토링 이라 한다.\n겉으로 드러나는 동작이 바꿔서는 안된다\n캡슐화, 응집도, 결합도 관점에서 개선하고 동작은 그대로 유지해야 한다\n메서드 응집도 몬스터 메서드(monster method): 코드를 재사용하는 유일한 방법이 원하는 부분을 복사 붙여넣는 것 뿐인, 변경하기 어려운 긴 메서드 클래스의 응집도와 마찬가지로 응집도가 높은 메서드는 변경되는 이유가 단 하나이다. 작은 메서드들로 조합된 메서드는 마치 주석들을 나열한 것처럼 보이기에 코드를 이해하기 쉽다. 객체를 자율적으로 만들자 메서드를 다른 클래스로 이동시킬 때는 인자에 정의된 클래스 중 하나로 이동하는 경우가 일반적이다. Reference 오브젝트 (조영호) https://product.kyobobook.co.kr/detail/S000001766367 ","wordCount":"821","inLanguage":"en","image":"https://2taezeat.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2024-05-05T11:30:03Z","dateModified":"2024-05-05T11:30:03Z","author":{"@type":"Person","name":"2taezeat"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://2taezeat.github.io/posts/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-ch05.-%EC%B1%85%EC%9E%84-%ED%95%A0%EB%8B%B9%ED%95%98%EA%B8%B0/"},"publisher":{"@type":"Organization","name":"2taezeat, blog","logo":{"@type":"ImageObject","url":"https://2taezeat.github.io/icon/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://2taezeat.github.io/ accesskey=h title="2taezeat blog (Alt + H)"><img src=https://2taezeat.github.io/icon/apple-touch-icon.png alt aria-label=logo height=30>2taezeat blog</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://2taezeat.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://2taezeat.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://2taezeat.github.io/searchs/ title=Search><span>Search</span></a></li><li><a href=https://github.com/2taezeat title=Github><span>Github</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://2taezeat.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://2taezeat.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">[오브젝트] ch05. 책임 할당하기</h1><div class=post-description>ch05. 책임 할당하기</div><div class=post-meta><span title='2024-05-05 11:30:03 +0000 +0000'>2024-05-05</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;821 words&nbsp;·&nbsp;2taezeat</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#5-책임-할당하기>5. 책임 할당하기</a><ul><li><a href=#책임-주도-설계를-향해>책임 주도 설계를 향해</a><ul><li><a href=#협력이라는-문맥-안에서-책임을-결정하라>협력이라는 문맥 안에서 책임을 결정하라</a></li></ul></li><li><a href=#책임-할당을-위한-grasp-패턴>책임 할당을 위한 GRASP 패턴</a><ul><li><a href=#도메인-개념에서-출발하기>도메인 개념에서 출발하기</a></li><li><a href=#정보-전문가에게-책임을-할당하라>정보 전문가에게 책임을 할당하라</a></li><li><a href=#높은-응집도와-낮은-결합도>높은 응집도와 낮은 결합도</a></li><li><a href=#창조자에게-객체-생성-책임을-할당하라>창조자에게 객체 생성 책임을 할당하라</a></li></ul></li><li><a href=#구현을-통한-검증>구현을 통한 검증</a><ul><li><a href=#discountcondition-개선하기>DiscountCondition 개선하기</a></li><li><a href=#타입-분리하기>타입 분리하기</a></li><li><a href=#다형성을-통해-분리하기>다형성을 통해 분리하기</a></li><li><a href=#변경으로부터-보호하기>변경으로부터 보호하기</a></li><li><a href=#movie-클래스-개선하기>Movie 클래스 개선하기</a></li><li><a href=#변경과-유연성>변경과 유연성</a></li></ul></li><li><a href=#책임-주도-설계의-대안>책임 주도 설계의 대안</a><ul><li><a href=#메서드-응집도>메서드 응집도</a></li><li><a href=#객체를-자율적으로-만들자>객체를 자율적으로 만들자</a></li></ul></li></ul></li><li><a href=#reference>Reference</a></li></ul></nav></div></details></div><div class=post-content><h1 id=5-책임-할당하기>5. 책임 할당하기<a hidden class=anchor aria-hidden=true href=#5-책임-할당하기>#</a></h1><h2 id=책임-주도-설계를-향해>책임 주도 설계를 향해<a hidden class=anchor aria-hidden=true href=#책임-주도-설계를-향해>#</a></h2><ul><li>데이터 중심 => 책임 중심<ol><li>데이터보다 행동을 먼저 결정하라</li><li>협력이라는 문맥 안에서 책임을 결정하라</li></ol></li></ul><h3 id=협력이라는-문맥-안에서-책임을-결정하라>협력이라는 문맥 안에서 책임을 결정하라<a hidden class=anchor aria-hidden=true href=#협력이라는-문맥-안에서-책임을-결정하라>#</a></h3><ul><li><strong>책임</strong>은 객체의 입장이 아니라 객체가 참여하는 <strong>협력</strong>에 적합해야 한다.<ul><li>메시지를 전송하는 클라이언트의 의도에 적합한 책임을 할당해야 한다</li><li>메시지가 객체를 선택하게 해야 한다</li></ul></li><li>클래스 기반 설계에서 메시지 기반 설계로 전환해야 한다<ul><li>&ldquo;이 클래스가 무엇을 해야 하지?&rdquo; => &ldquo;메시지를 전송해야 하는데 누구에게 전송해야 하지&rdquo;</li><li>메시지를 전송하기 때문에 객체를 갖게 된다</li></ul></li><li>메시지를 수신하기로 결정된 객체는 메시지를 처리할 <strong>책임</strong>을 할당 받게 된다</li><li>메시지를 먼저 결정하기에, 메시지 전송자의 관점에서 수신자가 깔끔하게 캡슐화 된다</li></ul><h2 id=책임-할당을-위한-grasp-패턴>책임 할당을 위한 GRASP 패턴<a hidden class=anchor aria-hidden=true href=#책임-할당을-위한-grasp-패턴>#</a></h2><ul><li>General Responsibility Assignment Software Pattern: 크레이크 라만이 패턴 형식으로 제안</li></ul><h3 id=도메인-개념에서-출발하기>도메인 개념에서 출발하기<a hidden class=anchor aria-hidden=true href=#도메인-개념에서-출발하기>#</a></h3><ul><li>도메인 개념들을 책임 할당의 대상으로 사용하면 코드에 도메인의 모습을 투영하기가 좀 더 수월해진다.</li><li>도메인 개념을 정리하는 데 너무 많은 시간을 들이지 말고 빠르게 설계와 구현을 진행하라<ul><li>올바른 도메인 모델이란 존재하지 않는다</li></ul></li></ul><h3 id=정보-전문가에게-책임을-할당하라>정보 전문가에게 책임을 할당하라<a hidden class=anchor aria-hidden=true href=#정보-전문가에게-책임을-할당하라>#</a></h3><ul><li><p>책임을 전송된 메시지로 간주하고, 메시지를 책임질 첫 번째 객체를 선택하는 것으로 설계를 시한다</p><ul><li>Ex) 애플리케이션은 영화를 예매할 책임이 있다.</li></ul></li><li><p>첫 번째 질문: 메시지를 전송할 객체는 무엇을 원하는가?</p><ul><li>메시지의 이름으로 &ldquo;예매하라&rdquo; 가 적절하다</li></ul></li><li><p>두 번째 질문: 메시지를 수신할 적합한 객체는 누구인가?</p><ul><li><p>책임을 수행할 정보를 알고 있는 객체에게 책임을 할당=> <strong>정보 전문가(Information Expert)</strong> 패턴</p></li><li><p>가장 기본적인 책임 할당 원칙</p></li><li><p>책임을 수행하는 데 필요한 정보를 가지고 있는 객체에게 할당하라</p></li><li><p>정보 전문가는 정보를 <strong>알고</strong> 있지만, 그 정보를 꼭 데이터로 <strong>저장</strong>하고 있을 필요는 없다</p></li></ul></li></ul><h3 id=높은-응집도와-낮은-결합도>높은 응집도와 낮은 결합도<a hidden class=anchor aria-hidden=true href=#높은-응집도와-낮은-결합도>#</a></h3><ul><li>객체에 책임을 할당할 때 다양한 대안이 존재한다면 높은 응집도와 낮은 결합도 측면에서 생각해라</li><li><strong>Low Coupling, High Cohesion</strong> 패턴이라고 한다</li><li><strong>Low Coupling</strong><ul><li>의존성을 낮추고 변화의 영향을 줄이며 재사용성을 증가시킬 수 있는 방법<ul><li>설계의 전체적인 결합도가 낮게 유지되도록 책임을 할당하라</li></ul></li><li><code>Movie</code>와 <code>DiscountCondition</code>은 이미 결합돼 있다.</li><li><code>Screening</code>과 <code>DiscountCondition</code>이 협력 할 경우 새로운 결합도가 생성된다.</li><li>따라서 <code>Movie</code>와 <code>DiscountCondition</code>이 렵력하는 것이 더 나은 설계 대안이다.</li></ul></li><li><strong>High Cohesion</strong><ul><li>어떻게 복잡성을 관리할 수 있는 수준으로 유지하는 법: 높은 응집도를 유지할 수 있게 책임을 할당해라</li><li><code>Screening</code>과 <code>DiscountCondition</code>이 협력 할 경우<ul><li><code>Screening</code>은 영화 요금 계산과 관련된 책임 일부를 떠안아야 한다.</li><li>예매 요금을 계산하는 방식이 변경될 경우 <code>Screening</code>도 함께 변경되어야 한다</li><li>서로 다른 이유로 변경되는 책임을 짊어지게 되므로 응집도 낮아짐</li></ul></li></ul></li></ul><h3 id=창조자에게-객체-생성-책임을-할당하라>창조자에게 객체 생성 책임을 할당하라<a hidden class=anchor aria-hidden=true href=#창조자에게-객체-생성-책임을-할당하라>#</a></h3><ul><li>영화 예매 협력의 최종 결과물은 <code>Reservation 인스턴스</code>를 반환하는 것</li><li><strong>Creator(창조자) 패턴</strong>은 객체를 생성할 책임을 어떤 객체에게 할당하지에 대한 지침을 제공</li><li>객체 A가, 아래 조건을 최대한 만족하는 B에게 객체 생성 책임을 할당해라<ul><li>B가 A 객체를 포함하거나 참조한다.</li><li>B가 A 객체를 기록한다</li><li>B가 A 객체를 긴밀하게 사용한다</li><li>B가 A 객체를 초기화하는 데 필요한 데이터를 가지고 있다 (B는 A에 대한 전문가다)</li></ul></li><li>이미 결합돼 있는 객체에게 <strong>생성 책임</strong>을 할당하는 것은 설계의 전체적인 결합도에 영향을 미치지 않는다.<ul><li>이미 존재하는 객체 사이의 관계를 이용하기에 낮은 결합도를 유지할 수 있다.</li></ul></li></ul><h2 id=구현을-통한-검증>구현을 통한 검증<a hidden class=anchor aria-hidden=true href=#구현을-통한-검증>#</a></h2><h3 id=discountcondition-개선하기>DiscountCondition 개선하기<a hidden class=anchor aria-hidden=true href=#discountcondition-개선하기>#</a></h3><ul><li><p><code>DiscountCondition</code> 은 서로 다른 세 가지 이유로 변경될 수 있다.</p><ol><li>새로운 할인 조건 추가</li><li>순번 조건을 판단하는 로직 변경</li><li>기간 조건을 판단하는 로직이 변경되는 경우</li></ol></li><li><p><code>DiscountCondition</code> 은 하나 이상의 변경 이유를 가지기 때문에 응집도가 낮다</p><ul><li>변경에 이유에 따라 클래스를 분리해야 한다</li></ul></li><li><p>코드를 통해 변경의 이유를 파악할 수 있는 방법</p><ol><li><p>변경 이유가 하나 이상의 이유로 변경돼야 한다면 응집도가 낮은 것</p></li><li><p>인스턴스 변수가 초기화되는 시점을 살펴보는 것</p><ul><li>응집도가 높은 클래스는 인스턴스를 생성할 때 모든 속성을 함께 초기화한다</li></ul></li><li><p>메서드들이 인스턴스 변수를 사용하는 방식</p><ul><li>모든 메서드가 객체의 모든 속성을 사용한다면 클래스의 응집도는 높다고 볼 수 있다</li></ul></li></ol></li></ul><h3 id=타입-분리하기>타입 분리하기<a hidden class=anchor aria-hidden=true href=#타입-분리하기>#</a></h3><ul><li><code>DiscountCondition</code> 을 순번 조건과 기간 조건이라는 두 개의 독립적인 타입으로 변경<ul><li>응집도가 높아지지만, 캡슐화라는 관점에서 설계 품질이 나빠졌음</li></ul></li></ul><h3 id=다형성을-통해-분리하기>다형성을 통해 분리하기<a hidden class=anchor aria-hidden=true href=#다형성을-통해-분리하기>#</a></h3><ul><li>객체의 암시적인 타입에 따라 행동을 분기해야 한다면 암시적인 타입을 명시적인 클래스로 정의하고 행동을 나눔으로써 응집도 문제를 해결할 수 있다<ul><li><code>DiscountCondition</code> 이라는 <strong>인터페이스</strong>를 구현하는 형식으로 변경</li><li>타입을 분리하고 변화하는 행동을 각 타입의 책임으로 할당해라</li><li><strong>Polymoorphism(다형성) 패턴</strong></li><li>객체의 타입을 검사해서 타입에 따라 대안들을 수행하는 조건적인 논리를 사용하지말고, 다형성을 이용해 변화를 다루기 쉽게 확장해라</li></ul></li></ul><h3 id=변경으로부터-보호하기>변경으로부터 보호하기<a hidden class=anchor aria-hidden=true href=#변경으로부터-보호하기>#</a></h3><ul><li><code>Movie</code>의 관점에서 <code>DiscountCondition</code> 의 타입이 캡슐화된다는 것은 새로운 <code>DiscountCondition</code> 타입이 추가되더라도 <code>Movie</code>가 영향을 받지 않는다는 것을 의미<ul><li>오직 <code>DiscountCondition</code> 인터페이스를 실체화하는 클래스를 추가하는 것으로 할인 조건의 종류를 확장할 수 있다.</li></ul></li><li>캡슐화하도록 책임을 할당하는 것을 <strong>Protected Variations(변경 보호) 패턴</strong> 이라 한다.<ul><li>변경될 가능성이 높으면, 캡슐화 하라</li></ul></li></ul><h3 id=movie-클래스-개선하기>Movie 클래스 개선하기<a hidden class=anchor aria-hidden=true href=#movie-클래스-개선하기>#</a></h3><ul><li>도메인의 구조가 코드의 구조를 이끈다<ul><li>변경 역시 도메인 모델의 일부이다.</li><li>도메인 모델에는 도메인 안에서 변하는 개념과 이들 사이의 관계가 투영돼 있어야 한다.</li></ul></li></ul><h3 id=변경과-유연성>변경과 유연성<a hidden class=anchor aria-hidden=true href=#변경과-유연성>#</a></h3><ul><li><p>설게를 주도하는 것은 변경이다; 개발자로서 변경에 대비할 수 있는 방법 두 가지</p><ul><li>이해하고 수정하기 쉽게 최대한 단순하게 설계</li><li>코드를 유연하게 만드는 것</li></ul></li><li><p>상속 대신 합성을 사용하면, 새로운 정책이 추가될 때 마다 유연한 설계가 가능하다</p></li><li><p><strong>도메인 모델</strong>은 단순히 도메인의 개념과 관계를 모아 놓은 것이 아니다.</p><ul><li><strong>도메인 모델</strong>은 구현과 밀접한 관계를 맺어야 한다.</li></ul></li></ul><h2 id=책임-주도-설계의-대안>책임 주도 설계의 대안<a hidden class=anchor aria-hidden=true href=#책임-주도-설계의-대안>#</a></h2><ul><li><p>수정하기 쉬운 소프트웨어로 개선하기 위해 겉으로 보이는 동작은 바꾸지 않은 채 내부 구조를 변경하는 것을 <strong>리팩토링</strong> 이라 한다.</p><ul><li><p>겉으로 드러나는 동작이 바꿔서는 안된다</p></li><li><p>캡슐화, 응집도, 결합도 관점에서 개선하고 동작은 그대로 유지해야 한다</p></li></ul></li></ul><h3 id=메서드-응집도>메서드 응집도<a hidden class=anchor aria-hidden=true href=#메서드-응집도>#</a></h3><ul><li><strong>몬스터 메서드(monster method)</strong>: 코드를 재사용하는 유일한 방법이 원하는 부분을 복사 붙여넣는 것 뿐인, 변경하기 어려운 긴 메서드</li><li>클래스의 응집도와 마찬가지로 <strong>응집도가 높은 메서드</strong>는 변경되는 이유가 단 하나이다.<ul><li>작은 메서드들로 조합된 메서드는 마치 주석들을 나열한 것처럼 보이기에 코드를 이해하기 쉽다.</li></ul></li></ul><h3 id=객체를-자율적으로-만들자>객체를 자율적으로 만들자<a hidden class=anchor aria-hidden=true href=#객체를-자율적으로-만들자>#</a></h3><ul><li>메서드를 다른 클래스로 이동시킬 때는 인자에 정의된 클래스 중 하나로 이동하는 경우가 일반적이다.</li></ul><h1 id=reference>Reference<a hidden class=anchor aria-hidden=true href=#reference>#</a></h1><ul><li>오브젝트 (조영호) <a href=https://product.kyobobook.co.kr/detail/S000001766367>https://product.kyobobook.co.kr/detail/S000001766367</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://2taezeat.github.io/tags/oop/>OOP</a></li><li><a href=https://2taezeat.github.io/tags/kotlin/>Kotlin</a></li></ul><nav class=paginav><a class=prev href=https://2taezeat.github.io/posts/jpa/%EC%9E%90%EB%B0%94-orm-%ED%91%9C%EC%A4%80-jpa-ch01.-jpa-%EC%86%8C%EA%B0%9C/><span class=title>« Prev</span><br><span>[자바 ORM 표준 JPA] ch01. JPA 소개</span>
</a><a class=next href=https://2taezeat.github.io/posts/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-ch04.-%EC%84%A4%EA%B3%84-%ED%92%88%EC%A7%88%EA%B3%BC-%ED%8A%B8%EB%A0%88%EC%9D%B4%EB%93%9C%EC%98%A4%ED%94%84/><span class=title>Next »</span><br><span>[오브젝트] ch04. 설계 품질과 트레이드오프</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share [오브젝트] ch05. 책임 할당하기 on x" href="https://x.com/intent/tweet/?text=%5b%ec%98%a4%eb%b8%8c%ec%a0%9d%ed%8a%b8%5d%20ch05.%20%ec%b1%85%ec%9e%84%20%ed%95%a0%eb%8b%b9%ed%95%98%ea%b8%b0&amp;url=https%3a%2f%2f2taezeat.github.io%2fposts%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8-ch05.-%25EC%25B1%2585%25EC%259E%2584-%25ED%2595%25A0%25EB%258B%25B9%25ED%2595%2598%25EA%25B8%25B0%2f&amp;hashtags=OOP%2cKotlin"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [오브젝트] ch05. 책임 할당하기 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2f2taezeat.github.io%2fposts%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8-ch05.-%25EC%25B1%2585%25EC%259E%2584-%25ED%2595%25A0%25EB%258B%25B9%25ED%2595%2598%25EA%25B8%25B0%2f&amp;title=%5b%ec%98%a4%eb%b8%8c%ec%a0%9d%ed%8a%b8%5d%20ch05.%20%ec%b1%85%ec%9e%84%20%ed%95%a0%eb%8b%b9%ed%95%98%ea%b8%b0&amp;summary=%5b%ec%98%a4%eb%b8%8c%ec%a0%9d%ed%8a%b8%5d%20ch05.%20%ec%b1%85%ec%9e%84%20%ed%95%a0%eb%8b%b9%ed%95%98%ea%b8%b0&amp;source=https%3a%2f%2f2taezeat.github.io%2fposts%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8-ch05.-%25EC%25B1%2585%25EC%259E%2584-%25ED%2595%25A0%25EB%258B%25B9%25ED%2595%2598%25EA%25B8%25B0%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [오브젝트] ch05. 책임 할당하기 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2f2taezeat.github.io%2fposts%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8-ch05.-%25EC%25B1%2585%25EC%259E%2584-%25ED%2595%25A0%25EB%258B%25B9%25ED%2595%2598%25EA%25B8%25B0%2f&title=%5b%ec%98%a4%eb%b8%8c%ec%a0%9d%ed%8a%b8%5d%20ch05.%20%ec%b1%85%ec%9e%84%20%ed%95%a0%eb%8b%b9%ed%95%98%ea%b8%b0"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [오브젝트] ch05. 책임 할당하기 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2f2taezeat.github.io%2fposts%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8-ch05.-%25EC%25B1%2585%25EC%259E%2584-%25ED%2595%25A0%25EB%258B%25B9%25ED%2595%2598%25EA%25B8%25B0%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [오브젝트] ch05. 책임 할당하기 on whatsapp" href="https://api.whatsapp.com/send?text=%5b%ec%98%a4%eb%b8%8c%ec%a0%9d%ed%8a%b8%5d%20ch05.%20%ec%b1%85%ec%9e%84%20%ed%95%a0%eb%8b%b9%ed%95%98%ea%b8%b0%20-%20https%3a%2f%2f2taezeat.github.io%2fposts%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8-ch05.-%25EC%25B1%2585%25EC%259E%2584-%25ED%2595%25A0%25EB%258B%25B9%25ED%2595%2598%25EA%25B8%25B0%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [오브젝트] ch05. 책임 할당하기 on telegram" href="https://telegram.me/share/url?text=%5b%ec%98%a4%eb%b8%8c%ec%a0%9d%ed%8a%b8%5d%20ch05.%20%ec%b1%85%ec%9e%84%20%ed%95%a0%eb%8b%b9%ed%95%98%ea%b8%b0&amp;url=https%3a%2f%2f2taezeat.github.io%2fposts%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8-ch05.-%25EC%25B1%2585%25EC%259E%2584-%25ED%2595%25A0%25EB%258B%25B9%25ED%2595%2598%25EA%25B8%25B0%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [오브젝트] ch05. 책임 할당하기 on ycombinator" href="https://news.ycombinator.com/submitlink?t=%5b%ec%98%a4%eb%b8%8c%ec%a0%9d%ed%8a%b8%5d%20ch05.%20%ec%b1%85%ec%9e%84%20%ed%95%a0%eb%8b%b9%ed%95%98%ea%b8%b0&u=https%3a%2f%2f2taezeat.github.io%2fposts%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8%2f%25EC%2598%25A4%25EB%25B8%258C%25EC%25A0%259D%25ED%258A%25B8-ch05.-%25EC%25B1%2585%25EC%259E%2584-%25ED%2595%25A0%25EB%258B%25B9%25ED%2595%2598%25EA%25B8%25B0%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><script src=https://utteranc.es/client.js repo=2taezeat/blog_comment issue-term=pathname label=comment theme=github-light crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2024 <a href=https://2taezeat.github.io/>2taezeat, blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>